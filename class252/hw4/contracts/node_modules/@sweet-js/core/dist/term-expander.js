'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _immutable = require('immutable');

var _terms = require('./terms');

var _sweetSpec = require('sweet-spec');

var T = _interopRequireWildcard(_sweetSpec);

var _scope = require('./scope');

var _compiler = require('./compiler');

var _compiler2 = _interopRequireDefault(_compiler);

var _syntax = require('./syntax');

var _syntax2 = _interopRequireDefault(_syntax);

var _enforester = require('./enforester');

var _templateProcessor = require('./template-processor');

var _astDispatcher = require('./ast-dispatcher');

var _astDispatcher2 = _interopRequireDefault(_astDispatcher);

var _scopeReducer = require('./scope-reducer');

var _scopeReducer2 = _interopRequireDefault(_scopeReducer);

var _symbol = require('./symbol');

var _transforms = require('./transforms');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

class TermExpander extends _astDispatcher2.default {
  constructor(context) {
    super('expand', true);
    this.context = context;
  }

  expand(term) {
    return this.dispatch(term);
  }

  expandRawSyntax(term) {
    return term;
  }

  expandRawDelimiter(term) {
    return term;
  }

  expandTemplateExpression(term) {
    return new T.TemplateExpression({
      tag: term.tag == null ? null : this.expand(term.tag),
      elements: term.elements.toArray()
    });
  }

  expandBreakStatement(term) {
    return new T.BreakStatement({
      label: term.label ? term.label.val() : null
    });
  }

  expandDoWhileStatement(term) {
    return new T.DoWhileStatement({
      body: this.expand(term.body),
      test: this.expand(term.test)
    });
  }

  expandWithStatement(term) {
    return new T.WithStatement({
      body: this.expand(term.body),
      object: this.expand(term.object)
    });
  }

  expandDebuggerStatement(term) {
    return term;
  }

  expandContinueStatement(term) {
    return new T.ContinueStatement({
      label: term.label ? term.label.val() : null
    });
  }

  expandSwitchStatementWithDefault(term) {
    return new T.SwitchStatementWithDefault({
      discriminant: this.expand(term.discriminant),
      preDefaultCases: term.preDefaultCases.map(c => this.expand(c)).toArray(),
      defaultCase: this.expand(term.defaultCase),
      postDefaultCases: term.postDefaultCases.map(c => this.expand(c)).toArray()
    });
  }

  expandComputedMemberExpression(term) {
    return new T.ComputedMemberExpression({
      object: this.expand(term.object),
      expression: this.expand(term.expression)
    });
  }

  expandSwitchStatement(term) {
    return new T.SwitchStatement({
      discriminant: this.expand(term.discriminant),
      cases: term.cases.map(c => this.expand(c)).toArray()
    });
  }

  expandFormalParameters(term) {
    let rest = term.rest == null ? null : this.expand(term.rest);
    return new T.FormalParameters({
      items: term.items.map(i => this.expand(i)),
      rest
    });
  }

  expandArrowExpressionE(term) {
    return this.doFunctionExpansion(term, 'ArrowExpression');
  }

  expandArrowExpression(term) {
    return this.doFunctionExpansion(term, 'ArrowExpression');
  }

  expandSwitchDefault(term) {
    return new T.SwitchDefault({
      consequent: term.consequent.map(c => this.expand(c)).toArray()
    });
  }

  expandSwitchCase(term) {
    return new T.SwitchCase({
      test: this.expand(term.test),
      consequent: term.consequent.map(c => this.expand(c)).toArray()
    });
  }

  expandForInStatement(term) {
    return new T.ForInStatement({
      left: this.expand(term.left),
      right: this.expand(term.right),
      body: this.expand(term.body)
    });
  }

  expandTryCatchStatement(term) {
    return new T.TryCatchStatement({
      body: this.expand(term.body),
      catchClause: this.expand(term.catchClause)
    });
  }

  expandTryFinallyStatement(term) {
    let catchClause = term.catchClause == null ? null : this.expand(term.catchClause);
    return new T.TryFinallyStatement({
      body: this.expand(term.body),
      catchClause,
      finalizer: this.expand(term.finalizer)
    });
  }

  expandCatchClause(term) {
    return new T.CatchClause({
      binding: this.expand(term.binding),
      body: this.expand(term.body)
    });
  }

  expandThrowStatement(term) {
    return new T.ThrowStatement({
      expression: this.expand(term.expression)
    });
  }

  expandForOfStatement(term) {
    return new T.ForOfStatement({
      left: this.expand(term.left),
      right: this.expand(term.right),
      body: this.expand(term.body)
    });
  }

  expandBindingIdentifier(term) {
    return term;
  }

  expandBindingPropertyIdentifier(term) {
    return term;
  }
  expandBindingPropertyProperty(term) {
    return new T.BindingPropertyProperty({
      name: this.expand(term.name),
      binding: this.expand(term.binding)
    });
  }

  expandComputedPropertyName(term) {
    return new T.ComputedPropertyName({
      expression: this.expand(term.expression)
    });
  }

  expandObjectBinding(term) {
    return new T.ObjectBinding({
      properties: term.properties.map(t => this.expand(t)).toArray()
    });
  }

  expandArrayBinding(term) {
    let restElement = term.restElement == null ? null : this.expand(term.restElement);
    return new T.ArrayBinding({
      elements: term.elements.map(t => t == null ? null : this.expand(t)).toArray(),
      restElement
    });
  }

  expandBindingWithDefault(term) {
    return new T.BindingWithDefault({
      binding: this.expand(term.binding),
      init: this.expand(term.init)
    });
  }

  expandShorthandProperty(term) {
    // because hygiene, shorthand properties must turn into DataProperties
    return new T.DataProperty({
      name: new T.StaticPropertyName({
        value: term.name
      }),
      expression: new T.IdentifierExpression({
        name: term.name
      })
    });
  }

  expandForStatement(term) {
    let init = term.init == null ? null : this.expand(term.init);
    let test = term.test == null ? null : this.expand(term.test);
    let update = term.update == null ? null : this.expand(term.update);
    let body = this.expand(term.body);
    return new T.ForStatement({ init, test, update, body });
  }

  expandYieldExpression(term) {
    let expr = term.expression == null ? null : this.expand(term.expression);
    return new T.YieldExpression({
      expression: expr
    });
  }

  expandYieldGeneratorExpression(term) {
    let expr = term.expression == null ? null : this.expand(term.expression);
    return new T.YieldGeneratorExpression({
      expression: expr
    });
  }

  expandWhileStatement(term) {
    return new T.WhileStatement({
      test: this.expand(term.test),
      body: this.expand(term.body)
    });
  }

  expandIfStatement(term) {
    let consequent = term.consequent == null ? null : this.expand(term.consequent);
    let alternate = term.alternate == null ? null : this.expand(term.alternate);
    return new T.IfStatement({
      test: this.expand(term.test),
      consequent: consequent,
      alternate: alternate
    });
  }

  expandBlockStatement(term) {
    return new T.BlockStatement({
      block: this.expand(term.block)
    });
  }

  expandBlock(term) {
    let scope = (0, _scope.freshScope)('block');
    this.context.currentScope.push(scope);
    let compiler = new _compiler2.default(this.context.phase, this.context.env, this.context.store, this.context);

    let markedBody, bodyTerm;
    markedBody = term.statements.map(b => b.reduce(new _scopeReducer2.default([{ scope, phase: _syntax.ALL_PHASES, flip: false }], this.context.bindings)));
    bodyTerm = new T.Block({
      statements: compiler.compile(markedBody)
    });
    this.context.currentScope.pop();
    return bodyTerm;
  }

  expandVariableDeclarationStatement(term) {
    return new T.VariableDeclarationStatement({
      declaration: this.expand(term.declaration)
    });
  }
  expandReturnStatement(term) {
    if (term.expression == null) {
      return term;
    }
    return new T.ReturnStatement({
      expression: this.expand(term.expression)
    });
  }

  expandClassDeclaration(term) {
    return new T.ClassDeclaration({
      name: term.name == null ? null : this.expand(term.name),
      super: term.super == null ? null : this.expand(term.super),
      elements: term.elements.map(el => this.expand(el)).toArray()
    });
  }

  expandClassExpression(term) {
    return new T.ClassExpression({
      name: term.name == null ? null : this.expand(term.name),
      super: term.super == null ? null : this.expand(term.super),
      elements: term.elements.map(el => this.expand(el)).toArray()
    });
  }

  expandClassElement(term) {
    return new T.ClassElement({
      isStatic: term.isStatic,
      method: this.expand(term.method)
    });
  }

  expandThisExpression(term) {
    return term;
  }

  expandSyntaxTemplate(term) {
    let r = (0, _templateProcessor.processTemplate)(term.template.slice(1, term.template.size - 1));
    let ident = this.context.getTemplateIdentifier();
    this.context.templateMap.set(ident, r.template);
    let name = _syntax2.default.fromIdentifier('syntaxTemplate', term.template.first().value);
    let callee = new T.IdentifierExpression({
      name: name
    });

    let expandedInterps = r.interp.map(i => {
      let enf = new _enforester.Enforester(i, (0, _immutable.List)(), this.context);
      return this.expand(enf.enforest('expression'));
    });

    let args = _immutable.List.of(new T.LiteralNumericExpression({ value: ident })).concat(expandedInterps);

    return new T.CallExpression({
      callee,
      arguments: args
    });
  }

  expandStaticMemberExpression(term) {
    return new T.StaticMemberExpression({
      object: this.expand(term.object),
      property: term.property
    });
  }

  expandArrayExpression(term) {
    return new T.ArrayExpression({
      elements: term.elements.map(t => t == null ? t : this.expand(t))
    });
  }

  expandImport(term) {
    return term;
  }

  expandImportNamespace(term) {
    return term;
  }

  expandExport(term) {
    return new T.Export({
      declaration: this.expand(term.declaration)
    });
  }

  expandExportDefault(term) {
    return new T.ExportDefault({
      body: this.expand(term.body)
    });
  }

  expandExportFrom(term) {
    return term;
  }

  expandExportAllFrom(term) {
    return term;
  }

  expandExportSpecifier(term) {
    return term;
  }

  expandStaticPropertyName(term) {
    return term;
  }

  expandDataProperty(term) {
    return new T.DataProperty({
      name: this.expand(term.name),
      expression: this.expand(term.expression)
    });
  }

  expandObjectExpression(term) {
    return new T.ObjectExpression({
      properties: term.properties.map(t => this.expand(t))
    });
  }

  expandVariableDeclarator(term) {
    let init = term.init == null ? null : this.expand(term.init);
    return new T.VariableDeclarator({
      binding: this.expand(term.binding),
      init: init
    });
  }

  expandVariableDeclaration(term) {
    if (term.kind === 'syntax' || term.kind === 'syntaxrec' || term.kind === 'operator') {
      return term;
    }
    return new T.VariableDeclaration({
      kind: term.kind,
      declarators: term.declarators.map(d => this.expand(d))
    });
  }

  expandParenthesizedExpression(term) {
    if (term.inner.size === 0) {
      throw new Error('unexpected end of input');
    }
    let enf = new _enforester.Enforester(term.inner, (0, _immutable.List)(), this.context);
    let lookahead = enf.peek();
    let t = enf.enforestExpression();
    if (t == null || enf.rest.size > 0) {
      if (enf.rest.size === 0) {
        throw enf.createError(')', 'unexpected token');
      }
      throw enf.createError(lookahead, 'unexpected syntax');
    }
    return this.expand(t);
  }

  expandUnaryExpression(term) {
    return new T.UnaryExpression({
      operator: term.operator,
      operand: this.expand(term.operand)
    });
  }

  expandUpdateExpression(term) {
    return new T.UpdateExpression({
      isPrefix: term.isPrefix,
      operator: term.operator,
      operand: this.expand(term.operand)
    });
  }

  expandBinaryExpression(term) {
    let left = this.expand(term.left);
    let right = this.expand(term.right);
    return new T.BinaryExpression({
      left: left,
      operator: term.operator,
      right: right
    });
  }

  expandConditionalExpression(term) {
    return new T.ConditionalExpression({
      test: this.expand(term.test),
      consequent: this.expand(term.consequent),
      alternate: this.expand(term.alternate)
    });
  }

  expandNewTargetExpression(term) {
    return term;
  }

  expandNewExpression(term) {
    let callee = this.expand(term.callee);
    let enf = new _enforester.Enforester(term.arguments, (0, _immutable.List)(), this.context);
    let args = enf.enforestArgumentList().map(arg => this.expand(arg));
    return new T.NewExpression({
      callee,
      arguments: args.toArray()
    });
  }

  expandSuper(term) {
    return term;
  }

  expandCallExpressionE(term) {
    let callee = this.expand(term.callee);
    let enf = new _enforester.Enforester(term.arguments, (0, _immutable.List)(), this.context);
    let args = enf.enforestArgumentList().map(arg => this.expand(arg));
    return new T.CallExpression({
      callee: callee,
      arguments: args
    });
  }

  expandSpreadElement(term) {
    return new T.SpreadElement({
      expression: this.expand(term.expression)
    });
  }

  expandExpressionStatement(term) {
    let child = this.expand(term.expression);
    return new T.ExpressionStatement({
      expression: child
    });
  }

  expandLabeledStatement(term) {
    return new T.LabeledStatement({
      label: term.label.val(),
      body: this.expand(term.body)
    });
  }

  doFunctionExpansion(term, type) {
    let scope = (0, _scope.freshScope)('fun');
    let params;
    let self = this;
    if (type !== 'Getter' && type !== 'Setter') {
      // TODO: need to register the parameter bindings again
      params = term.params.reduce(new class extends T.default.CloneReducer {
        reduceBindingIdentifier(term) {
          let name = term.name.addScope(scope, self.context.bindings, _syntax.ALL_PHASES);
          let newBinding = (0, _symbol.gensym)(name.val());

          self.context.env.set(newBinding.toString(), new _transforms.VarBindingTransform(name));
          self.context.bindings.add(name, {
            binding: newBinding,
            phase: self.context.phase,
            skipDup: true
          });
          return new T.BindingIdentifier({ name });
        }
      }());
      params = this.expand(params);
    }
    this.context.currentScope.push(scope);
    let compiler = new _compiler2.default(this.context.phase, this.context.env, this.context.store, this.context);

    let bodyTerm;
    let scopeReducer = new _scopeReducer2.default([{ scope, phase: _syntax.ALL_PHASES, flip: false }], this.context.bindings);
    if (term.body instanceof T.default) {
      // Arrow functions have a single term as their body
      bodyTerm = this.expand(term.body.reduce(scopeReducer));
    } else {
      let compiledBody = compiler.compile(term.body.map(b => b.reduce(scopeReducer)));
      const directives = compiledBody.takeWhile(s => (0, _terms.isExpressionStatement)(s) && (0, _terms.isLiteralStringExpression)(s.expression)).map(s => new T.Directive({ rawValue: s.expression.value }));
      bodyTerm = new T.FunctionBody({
        directives: directives,
        statements: compiledBody.slice(directives.size)
      });
    }
    this.context.currentScope.pop();

    switch (type) {
      case 'Getter':
        return new T.Getter({
          name: this.expand(term.name),
          body: bodyTerm
        });
      case 'Setter':
        return new T.Setter({
          name: this.expand(term.name),
          param: term.param,
          body: bodyTerm
        });
      case 'Method':
        return new T.Method({
          name: term.name,
          isGenerator: term.isGenerator,
          params: params,
          body: bodyTerm
        });
      case 'ArrowExpression':
        return new T.ArrowExpression({
          params: params,
          body: bodyTerm
        });
      case 'FunctionExpression':
        return new T.FunctionExpression({
          name: term.name,
          isGenerator: term.isGenerator,
          params: params,
          body: bodyTerm
        });
      case 'FunctionDeclaration':
        return new T.FunctionDeclaration({
          name: term.name,
          isGenerator: term.isGenerator,
          params: params,
          body: bodyTerm
        });
      default:
        throw new Error(`Unknown function type: ${type}`);
    }
  }

  expandMethod(term) {
    return this.doFunctionExpansion(term, 'Method');
  }

  expandSetter(term) {
    return this.doFunctionExpansion(term, 'Setter');
  }

  expandGetter(term) {
    return this.doFunctionExpansion(term, 'Getter');
  }

  expandFunctionDeclarationE(term) {
    return this.doFunctionExpansion(term, 'FunctionDeclaration');
  }

  expandFunctionExpressionE(term) {
    return this.doFunctionExpansion(term, 'FunctionExpression');
  }

  expandCompoundAssignmentExpression(term) {
    return new T.CompoundAssignmentExpression({
      binding: this.expand(term.binding),
      operator: term.operator,
      expression: this.expand(term.expression)
    });
  }

  expandAssignmentExpression(term) {
    return new T.AssignmentExpression({
      binding: this.expand(term.binding),
      expression: this.expand(term.expression)
    });
  }

  expandEmptyStatement(term) {
    return term;
  }

  expandLiteralBooleanExpression(term) {
    return term;
  }

  expandLiteralNumericExpression(term) {
    return term;
  }
  expandLiteralInfinityExpression(term) {
    return term;
  }

  expandIdentifierExpression(term) {
    let trans = this.context.env.get(term.name.resolve(this.context.phase));
    if (trans) {
      return new T.IdentifierExpression({
        name: trans.id
      });
    }
    return term;
  }

  expandLiteralNullExpression(term) {
    return term;
  }

  expandLiteralStringExpression(term) {
    return term;
  }

  expandLiteralRegExpExpression(term) {
    return term;
  }
}
exports.default = TermExpander;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90ZXJtLWV4cGFuZGVyLmpzIl0sIm5hbWVzIjpbIlQiLCJUZXJtRXhwYW5kZXIiLCJjb25zdHJ1Y3RvciIsImNvbnRleHQiLCJleHBhbmQiLCJ0ZXJtIiwiZGlzcGF0Y2giLCJleHBhbmRSYXdTeW50YXgiLCJleHBhbmRSYXdEZWxpbWl0ZXIiLCJleHBhbmRUZW1wbGF0ZUV4cHJlc3Npb24iLCJUZW1wbGF0ZUV4cHJlc3Npb24iLCJ0YWciLCJlbGVtZW50cyIsInRvQXJyYXkiLCJleHBhbmRCcmVha1N0YXRlbWVudCIsIkJyZWFrU3RhdGVtZW50IiwibGFiZWwiLCJ2YWwiLCJleHBhbmREb1doaWxlU3RhdGVtZW50IiwiRG9XaGlsZVN0YXRlbWVudCIsImJvZHkiLCJ0ZXN0IiwiZXhwYW5kV2l0aFN0YXRlbWVudCIsIldpdGhTdGF0ZW1lbnQiLCJvYmplY3QiLCJleHBhbmREZWJ1Z2dlclN0YXRlbWVudCIsImV4cGFuZENvbnRpbnVlU3RhdGVtZW50IiwiQ29udGludWVTdGF0ZW1lbnQiLCJleHBhbmRTd2l0Y2hTdGF0ZW1lbnRXaXRoRGVmYXVsdCIsIlN3aXRjaFN0YXRlbWVudFdpdGhEZWZhdWx0IiwiZGlzY3JpbWluYW50IiwicHJlRGVmYXVsdENhc2VzIiwibWFwIiwiYyIsImRlZmF1bHRDYXNlIiwicG9zdERlZmF1bHRDYXNlcyIsImV4cGFuZENvbXB1dGVkTWVtYmVyRXhwcmVzc2lvbiIsIkNvbXB1dGVkTWVtYmVyRXhwcmVzc2lvbiIsImV4cHJlc3Npb24iLCJleHBhbmRTd2l0Y2hTdGF0ZW1lbnQiLCJTd2l0Y2hTdGF0ZW1lbnQiLCJjYXNlcyIsImV4cGFuZEZvcm1hbFBhcmFtZXRlcnMiLCJyZXN0IiwiRm9ybWFsUGFyYW1ldGVycyIsIml0ZW1zIiwiaSIsImV4cGFuZEFycm93RXhwcmVzc2lvbkUiLCJkb0Z1bmN0aW9uRXhwYW5zaW9uIiwiZXhwYW5kQXJyb3dFeHByZXNzaW9uIiwiZXhwYW5kU3dpdGNoRGVmYXVsdCIsIlN3aXRjaERlZmF1bHQiLCJjb25zZXF1ZW50IiwiZXhwYW5kU3dpdGNoQ2FzZSIsIlN3aXRjaENhc2UiLCJleHBhbmRGb3JJblN0YXRlbWVudCIsIkZvckluU3RhdGVtZW50IiwibGVmdCIsInJpZ2h0IiwiZXhwYW5kVHJ5Q2F0Y2hTdGF0ZW1lbnQiLCJUcnlDYXRjaFN0YXRlbWVudCIsImNhdGNoQ2xhdXNlIiwiZXhwYW5kVHJ5RmluYWxseVN0YXRlbWVudCIsIlRyeUZpbmFsbHlTdGF0ZW1lbnQiLCJmaW5hbGl6ZXIiLCJleHBhbmRDYXRjaENsYXVzZSIsIkNhdGNoQ2xhdXNlIiwiYmluZGluZyIsImV4cGFuZFRocm93U3RhdGVtZW50IiwiVGhyb3dTdGF0ZW1lbnQiLCJleHBhbmRGb3JPZlN0YXRlbWVudCIsIkZvck9mU3RhdGVtZW50IiwiZXhwYW5kQmluZGluZ0lkZW50aWZpZXIiLCJleHBhbmRCaW5kaW5nUHJvcGVydHlJZGVudGlmaWVyIiwiZXhwYW5kQmluZGluZ1Byb3BlcnR5UHJvcGVydHkiLCJCaW5kaW5nUHJvcGVydHlQcm9wZXJ0eSIsIm5hbWUiLCJleHBhbmRDb21wdXRlZFByb3BlcnR5TmFtZSIsIkNvbXB1dGVkUHJvcGVydHlOYW1lIiwiZXhwYW5kT2JqZWN0QmluZGluZyIsIk9iamVjdEJpbmRpbmciLCJwcm9wZXJ0aWVzIiwidCIsImV4cGFuZEFycmF5QmluZGluZyIsInJlc3RFbGVtZW50IiwiQXJyYXlCaW5kaW5nIiwiZXhwYW5kQmluZGluZ1dpdGhEZWZhdWx0IiwiQmluZGluZ1dpdGhEZWZhdWx0IiwiaW5pdCIsImV4cGFuZFNob3J0aGFuZFByb3BlcnR5IiwiRGF0YVByb3BlcnR5IiwiU3RhdGljUHJvcGVydHlOYW1lIiwidmFsdWUiLCJJZGVudGlmaWVyRXhwcmVzc2lvbiIsImV4cGFuZEZvclN0YXRlbWVudCIsInVwZGF0ZSIsIkZvclN0YXRlbWVudCIsImV4cGFuZFlpZWxkRXhwcmVzc2lvbiIsImV4cHIiLCJZaWVsZEV4cHJlc3Npb24iLCJleHBhbmRZaWVsZEdlbmVyYXRvckV4cHJlc3Npb24iLCJZaWVsZEdlbmVyYXRvckV4cHJlc3Npb24iLCJleHBhbmRXaGlsZVN0YXRlbWVudCIsIldoaWxlU3RhdGVtZW50IiwiZXhwYW5kSWZTdGF0ZW1lbnQiLCJhbHRlcm5hdGUiLCJJZlN0YXRlbWVudCIsImV4cGFuZEJsb2NrU3RhdGVtZW50IiwiQmxvY2tTdGF0ZW1lbnQiLCJibG9jayIsImV4cGFuZEJsb2NrIiwic2NvcGUiLCJjdXJyZW50U2NvcGUiLCJwdXNoIiwiY29tcGlsZXIiLCJwaGFzZSIsImVudiIsInN0b3JlIiwibWFya2VkQm9keSIsImJvZHlUZXJtIiwic3RhdGVtZW50cyIsImIiLCJyZWR1Y2UiLCJmbGlwIiwiYmluZGluZ3MiLCJCbG9jayIsImNvbXBpbGUiLCJwb3AiLCJleHBhbmRWYXJpYWJsZURlY2xhcmF0aW9uU3RhdGVtZW50IiwiVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCIsImRlY2xhcmF0aW9uIiwiZXhwYW5kUmV0dXJuU3RhdGVtZW50IiwiUmV0dXJuU3RhdGVtZW50IiwiZXhwYW5kQ2xhc3NEZWNsYXJhdGlvbiIsIkNsYXNzRGVjbGFyYXRpb24iLCJzdXBlciIsImVsIiwiZXhwYW5kQ2xhc3NFeHByZXNzaW9uIiwiQ2xhc3NFeHByZXNzaW9uIiwiZXhwYW5kQ2xhc3NFbGVtZW50IiwiQ2xhc3NFbGVtZW50IiwiaXNTdGF0aWMiLCJtZXRob2QiLCJleHBhbmRUaGlzRXhwcmVzc2lvbiIsImV4cGFuZFN5bnRheFRlbXBsYXRlIiwiciIsInRlbXBsYXRlIiwic2xpY2UiLCJzaXplIiwiaWRlbnQiLCJnZXRUZW1wbGF0ZUlkZW50aWZpZXIiLCJ0ZW1wbGF0ZU1hcCIsInNldCIsImZyb21JZGVudGlmaWVyIiwiZmlyc3QiLCJjYWxsZWUiLCJleHBhbmRlZEludGVycHMiLCJpbnRlcnAiLCJlbmYiLCJlbmZvcmVzdCIsImFyZ3MiLCJvZiIsIkxpdGVyYWxOdW1lcmljRXhwcmVzc2lvbiIsImNvbmNhdCIsIkNhbGxFeHByZXNzaW9uIiwiYXJndW1lbnRzIiwiZXhwYW5kU3RhdGljTWVtYmVyRXhwcmVzc2lvbiIsIlN0YXRpY01lbWJlckV4cHJlc3Npb24iLCJwcm9wZXJ0eSIsImV4cGFuZEFycmF5RXhwcmVzc2lvbiIsIkFycmF5RXhwcmVzc2lvbiIsImV4cGFuZEltcG9ydCIsImV4cGFuZEltcG9ydE5hbWVzcGFjZSIsImV4cGFuZEV4cG9ydCIsIkV4cG9ydCIsImV4cGFuZEV4cG9ydERlZmF1bHQiLCJFeHBvcnREZWZhdWx0IiwiZXhwYW5kRXhwb3J0RnJvbSIsImV4cGFuZEV4cG9ydEFsbEZyb20iLCJleHBhbmRFeHBvcnRTcGVjaWZpZXIiLCJleHBhbmRTdGF0aWNQcm9wZXJ0eU5hbWUiLCJleHBhbmREYXRhUHJvcGVydHkiLCJleHBhbmRPYmplY3RFeHByZXNzaW9uIiwiT2JqZWN0RXhwcmVzc2lvbiIsImV4cGFuZFZhcmlhYmxlRGVjbGFyYXRvciIsIlZhcmlhYmxlRGVjbGFyYXRvciIsImV4cGFuZFZhcmlhYmxlRGVjbGFyYXRpb24iLCJraW5kIiwiVmFyaWFibGVEZWNsYXJhdGlvbiIsImRlY2xhcmF0b3JzIiwiZCIsImV4cGFuZFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uIiwiaW5uZXIiLCJFcnJvciIsImxvb2thaGVhZCIsInBlZWsiLCJlbmZvcmVzdEV4cHJlc3Npb24iLCJjcmVhdGVFcnJvciIsImV4cGFuZFVuYXJ5RXhwcmVzc2lvbiIsIlVuYXJ5RXhwcmVzc2lvbiIsIm9wZXJhdG9yIiwib3BlcmFuZCIsImV4cGFuZFVwZGF0ZUV4cHJlc3Npb24iLCJVcGRhdGVFeHByZXNzaW9uIiwiaXNQcmVmaXgiLCJleHBhbmRCaW5hcnlFeHByZXNzaW9uIiwiQmluYXJ5RXhwcmVzc2lvbiIsImV4cGFuZENvbmRpdGlvbmFsRXhwcmVzc2lvbiIsIkNvbmRpdGlvbmFsRXhwcmVzc2lvbiIsImV4cGFuZE5ld1RhcmdldEV4cHJlc3Npb24iLCJleHBhbmROZXdFeHByZXNzaW9uIiwiZW5mb3Jlc3RBcmd1bWVudExpc3QiLCJhcmciLCJOZXdFeHByZXNzaW9uIiwiZXhwYW5kU3VwZXIiLCJleHBhbmRDYWxsRXhwcmVzc2lvbkUiLCJleHBhbmRTcHJlYWRFbGVtZW50IiwiU3ByZWFkRWxlbWVudCIsImV4cGFuZEV4cHJlc3Npb25TdGF0ZW1lbnQiLCJjaGlsZCIsIkV4cHJlc3Npb25TdGF0ZW1lbnQiLCJleHBhbmRMYWJlbGVkU3RhdGVtZW50IiwiTGFiZWxlZFN0YXRlbWVudCIsInR5cGUiLCJwYXJhbXMiLCJzZWxmIiwiQ2xvbmVSZWR1Y2VyIiwicmVkdWNlQmluZGluZ0lkZW50aWZpZXIiLCJhZGRTY29wZSIsIm5ld0JpbmRpbmciLCJ0b1N0cmluZyIsImFkZCIsInNraXBEdXAiLCJCaW5kaW5nSWRlbnRpZmllciIsInNjb3BlUmVkdWNlciIsImNvbXBpbGVkQm9keSIsImRpcmVjdGl2ZXMiLCJ0YWtlV2hpbGUiLCJzIiwiRGlyZWN0aXZlIiwicmF3VmFsdWUiLCJGdW5jdGlvbkJvZHkiLCJHZXR0ZXIiLCJTZXR0ZXIiLCJwYXJhbSIsIk1ldGhvZCIsImlzR2VuZXJhdG9yIiwiQXJyb3dFeHByZXNzaW9uIiwiRnVuY3Rpb25FeHByZXNzaW9uIiwiRnVuY3Rpb25EZWNsYXJhdGlvbiIsImV4cGFuZE1ldGhvZCIsImV4cGFuZFNldHRlciIsImV4cGFuZEdldHRlciIsImV4cGFuZEZ1bmN0aW9uRGVjbGFyYXRpb25FIiwiZXhwYW5kRnVuY3Rpb25FeHByZXNzaW9uRSIsImV4cGFuZENvbXBvdW5kQXNzaWdubWVudEV4cHJlc3Npb24iLCJDb21wb3VuZEFzc2lnbm1lbnRFeHByZXNzaW9uIiwiZXhwYW5kQXNzaWdubWVudEV4cHJlc3Npb24iLCJBc3NpZ25tZW50RXhwcmVzc2lvbiIsImV4cGFuZEVtcHR5U3RhdGVtZW50IiwiZXhwYW5kTGl0ZXJhbEJvb2xlYW5FeHByZXNzaW9uIiwiZXhwYW5kTGl0ZXJhbE51bWVyaWNFeHByZXNzaW9uIiwiZXhwYW5kTGl0ZXJhbEluZmluaXR5RXhwcmVzc2lvbiIsImV4cGFuZElkZW50aWZpZXJFeHByZXNzaW9uIiwidHJhbnMiLCJnZXQiLCJyZXNvbHZlIiwiaWQiLCJleHBhbmRMaXRlcmFsTnVsbEV4cHJlc3Npb24iLCJleHBhbmRMaXRlcmFsU3RyaW5nRXhwcmVzc2lvbiIsImV4cGFuZExpdGVyYWxSZWdFeHBFeHByZXNzaW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7SUFBa0JBLEM7O0FBQ2xCOztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7O0FBQ0E7Ozs7OztBQUdlLE1BQU1DLFlBQU4saUNBQXlDO0FBQ3REQyxjQUFZQyxPQUFaLEVBQXFCO0FBQ25CLFVBQU0sUUFBTixFQUFnQixJQUFoQjtBQUNBLFNBQUtBLE9BQUwsR0FBZUEsT0FBZjtBQUNEOztBQUVEQyxTQUFPQyxJQUFQLEVBQWE7QUFDWCxXQUFPLEtBQUtDLFFBQUwsQ0FBY0QsSUFBZCxDQUFQO0FBQ0Q7O0FBRURFLGtCQUFnQkYsSUFBaEIsRUFBc0I7QUFDcEIsV0FBT0EsSUFBUDtBQUNEOztBQUVERyxxQkFBbUJILElBQW5CLEVBQXlCO0FBQ3ZCLFdBQU9BLElBQVA7QUFDRDs7QUFFREksMkJBQXlCSixJQUF6QixFQUErQjtBQUM3QixXQUFPLElBQUlMLEVBQUVVLGtCQUFOLENBQXlCO0FBQzlCQyxXQUFLTixLQUFLTSxHQUFMLElBQVksSUFBWixHQUFtQixJQUFuQixHQUEwQixLQUFLUCxNQUFMLENBQVlDLEtBQUtNLEdBQWpCLENBREQ7QUFFOUJDLGdCQUFVUCxLQUFLTyxRQUFMLENBQWNDLE9BQWQ7QUFGb0IsS0FBekIsQ0FBUDtBQUlEOztBQUVEQyx1QkFBcUJULElBQXJCLEVBQTJCO0FBQ3pCLFdBQU8sSUFBSUwsRUFBRWUsY0FBTixDQUFxQjtBQUMxQkMsYUFBT1gsS0FBS1csS0FBTCxHQUFhWCxLQUFLVyxLQUFMLENBQVdDLEdBQVgsRUFBYixHQUFnQztBQURiLEtBQXJCLENBQVA7QUFHRDs7QUFFREMseUJBQXVCYixJQUF2QixFQUE2QjtBQUMzQixXQUFPLElB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O0FBQ0RpUSxrQ0FBZ0NqUSxJQUFoQyxFQUFzQztBQUNwQyxXQUFPQSxJQUFQO0FBQ0Q7O0FBRURrUSw2QkFBMkJsUSxJQUEzQixFQUFpQztBQUMvQixRQUFJbVEsUUFBUSxLQUFLclEsT0FBTCxDQUFhaUgsR0FBYixDQUFpQnFKLEdBQWpCLENBQXFCcFEsS0FBS3VFLElBQUwsQ0FBVThMLE9BQVYsQ0FBa0IsS0FBS3ZRLE9BQUwsQ0FBYWdILEtBQS9CLENBQXJCLENBQVo7QUFDQSxRQUFJcUosS0FBSixFQUFXO0FBQ1QsYUFBTyxJQUFJeFEsRUFBRTZGLG9CQUFOLENBQTJCO0FBQ2hDakIsY0FBTTRMLE1BQU1HO0FBRG9CLE9BQTNCLENBQVA7QUFHRDtBQUNELFdBQU90USxJQUFQO0FBQ0Q7O0FBRUR1USw4QkFBNEJ2USxJQUE1QixFQUFrQztBQUNoQyxXQUFPQSxJQUFQO0FBQ0Q7O0FBRUR3USxnQ0FBOEJ4USxJQUE5QixFQUFvQztBQUNsQyxXQUFPQSxJQUFQO0FBQ0Q7O0FBRUR5USxnQ0FBOEJ6USxJQUE5QixFQUFvQztBQUNsQyxXQUFPQSxJQUFQO0FBQ0Q7QUFyc0JxRDtrQkFBbkNKLFkiLCJmaWxlIjoidGVybS1leHBhbmRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExpc3QgfSBmcm9tICdpbW11dGFibGUnO1xuaW1wb3J0IHsgaXNFeHByZXNzaW9uU3RhdGVtZW50LCBpc0xpdGVyYWxTdHJpbmdFeHByZXNzaW9uIH0gZnJvbSAnLi90ZXJtcyc7XG5pbXBvcnQgVGVybSwgKiBhcyBUIGZyb20gJ3N3ZWV0LXNwZWMnO1xuaW1wb3J0IHsgZnJlc2hTY29wZSB9IGZyb20gJy4vc2NvcGUnO1xuaW1wb3J0IENvbXBpbGVyIGZyb20gJy4vY29tcGlsZXInO1xuaW1wb3J0IHsgQUxMX1BIQVNFUyB9IGZyb20gJy4vc3ludGF4JztcbmltcG9ydCB7IEVuZm9yZXN0ZXIgfSBmcm9tICcuL2VuZm9yZXN0ZXInO1xuaW1wb3J0IHsgcHJvY2Vzc1RlbXBsYXRlIH0gZnJvbSAnLi90ZW1wbGF0ZS1wcm9jZXNzb3InO1xuaW1wb3J0IEFTVERpc3BhdGNoZXIgZnJvbSAnLi9hc3QtZGlzcGF0Y2hlcic7XG5pbXBvcnQgU2NvcGVSZWR1Y2VyIGZyb20gJy4vc2NvcGUtcmVkdWNlcic7XG5pbXBvcnQgeyBnZW5zeW0gfSBmcm9tICcuL3N5bWJvbCc7XG5pbXBvcnQgeyBWYXJCaW5kaW5nVHJhbnNmb3JtIH0gZnJvbSAnLi90cmFuc2Zvcm1zJztcbmltcG9ydCBTeW50YXggZnJvbSAnLi9zeW50YXgnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXJtRXhwYW5kZXIgZXh0ZW5kcyBBU1REaXNwYXRjaGVyIHtcbiAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgIHN1cGVyKCdleHBhbmQnLCB0cnVlKTtcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB9XG5cbiAgZXhwYW5kKHRlcm0pIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaCh0ZXJtKTtcbiAgfVxuXG4gIGV4cGFuZFJhd1N5bnRheCh0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmRSYXdEZWxpbWl0ZXIodGVybSkge1xuICAgIHJldHVybiB0ZXJtO1xuICB9XG5cbiAgZXhwYW5kVGVtcGxhdGVFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuVGVtcGxhdGVFeHByZXNzaW9uKHtcbiAgICAgIHRhZzogdGVybS50YWcgPT0gbnVsbCA/IG51bGwgOiB0aGlzLmV4cGFuZCh0ZXJtLnRhZyksXG4gICAgICBlbGVtZW50czogdGVybS5lbGVtZW50cy50b0FycmF5KCksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRCcmVha1N0YXRlbWVudCh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULkJyZWFrU3RhdGVtZW50KHtcbiAgICAgIGxhYmVsOiB0ZXJtLmxhYmVsID8gdGVybS5sYWJlbC52YWwoKSA6IG51bGwsXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmREb1doaWxlU3RhdGVtZW50KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuRG9XaGlsZVN0YXRlbWVudCh7XG4gICAgICBib2R5OiB0aGlzLmV4cGFuZCh0ZXJtLmJvZHkpLFxuICAgICAgdGVzdDogdGhpcy5leHBhbmQodGVybS50ZXN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFdpdGhTdGF0ZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5XaXRoU3RhdGVtZW50KHtcbiAgICAgIGJvZHk6IHRoaXMuZXhwYW5kKHRlcm0uYm9keSksXG4gICAgICBvYmplY3Q6IHRoaXMuZXhwYW5kKHRlcm0ub2JqZWN0KSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZERlYnVnZ2VyU3RhdGVtZW50KHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZENvbnRpbnVlU3RhdGVtZW50KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQ29udGludWVTdGF0ZW1lbnQoe1xuICAgICAgbGFiZWw6IHRlcm0ubGFiZWwgPyB0ZXJtLmxhYmVsLnZhbCgpIDogbnVsbCxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFN3aXRjaFN0YXRlbWVudFdpdGhEZWZhdWx0KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuU3dpdGNoU3RhdGVtZW50V2l0aERlZmF1bHQoe1xuICAgICAgZGlzY3JpbWluYW50OiB0aGlzLmV4cGFuZCh0ZXJtLmRpc2NyaW1pbmFudCksXG4gICAgICBwcmVEZWZhdWx0Q2FzZXM6IHRlcm0ucHJlRGVmYXVsdENhc2VzLm1hcChjID0+IHRoaXMuZXhwYW5kKGMpKS50b0FycmF5KCksXG4gICAgICBkZWZhdWx0Q2FzZTogdGhpcy5leHBhbmQodGVybS5kZWZhdWx0Q2FzZSksXG4gICAgICBwb3N0RGVmYXVsdENhc2VzOiB0ZXJtLnBvc3REZWZhdWx0Q2FzZXNcbiAgICAgICAgLm1hcChjID0+IHRoaXMuZXhwYW5kKGMpKVxuICAgICAgICAudG9BcnJheSgpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kQ29tcHV0ZWRNZW1iZXJFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQ29tcHV0ZWRNZW1iZXJFeHByZXNzaW9uKHtcbiAgICAgIG9iamVjdDogdGhpcy5leHBhbmQodGVybS5vYmplY3QpLFxuICAgICAgZXhwcmVzc2lvbjogdGhpcy5leHBhbmQodGVybS5leHByZXNzaW9uKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFN3aXRjaFN0YXRlbWVudCh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULlN3aXRjaFN0YXRlbWVudCh7XG4gICAgICBkaXNjcmltaW5hbnQ6IHRoaXMuZXhwYW5kKHRlcm0uZGlzY3JpbWluYW50KSxcbiAgICAgIGNhc2VzOiB0ZXJtLmNhc2VzLm1hcChjID0+IHRoaXMuZXhwYW5kKGMpKS50b0FycmF5KCksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRGb3JtYWxQYXJhbWV0ZXJzKHRlcm0pIHtcbiAgICBsZXQgcmVzdCA9IHRlcm0ucmVzdCA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHRlcm0ucmVzdCk7XG4gICAgcmV0dXJuIG5ldyBULkZvcm1hbFBhcmFtZXRlcnMoe1xuICAgICAgaXRlbXM6IHRlcm0uaXRlbXMubWFwKGkgPT4gdGhpcy5leHBhbmQoaSkpLFxuICAgICAgcmVzdCxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZEFycm93RXhwcmVzc2lvbkUodGVybSkge1xuICAgIHJldHVybiB0aGlzLmRvRnVuY3Rpb25FeHBhbnNpb24odGVybSwgJ0Fycm93RXhwcmVzc2lvbicpO1xuICB9XG5cbiAgZXhwYW5kQXJyb3dFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gdGhpcy5kb0Z1bmN0aW9uRXhwYW5zaW9uKHRlcm0sICdBcnJvd0V4cHJlc3Npb24nKTtcbiAgfVxuXG4gIGV4cGFuZFN3aXRjaERlZmF1bHQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5Td2l0Y2hEZWZhdWx0KHtcbiAgICAgIGNvbnNlcXVlbnQ6IHRlcm0uY29uc2VxdWVudC5tYXAoYyA9PiB0aGlzLmV4cGFuZChjKSkudG9BcnJheSgpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kU3dpdGNoQ2FzZSh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULlN3aXRjaENhc2Uoe1xuICAgICAgdGVzdDogdGhpcy5leHBhbmQodGVybS50ZXN0KSxcbiAgICAgIGNvbnNlcXVlbnQ6IHRlcm0uY29uc2VxdWVudC5tYXAoYyA9PiB0aGlzLmV4cGFuZChjKSkudG9BcnJheSgpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kRm9ySW5TdGF0ZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5Gb3JJblN0YXRlbWVudCh7XG4gICAgICBsZWZ0OiB0aGlzLmV4cGFuZCh0ZXJtLmxlZnQpLFxuICAgICAgcmlnaHQ6IHRoaXMuZXhwYW5kKHRlcm0ucmlnaHQpLFxuICAgICAgYm9keTogdGhpcy5leHBhbmQodGVybS5ib2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFRyeUNhdGNoU3RhdGVtZW50KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuVHJ5Q2F0Y2hTdGF0ZW1lbnQoe1xuICAgICAgYm9keTogdGhpcy5leHBhbmQodGVybS5ib2R5KSxcbiAgICAgIGNhdGNoQ2xhdXNlOiB0aGlzLmV4cGFuZCh0ZXJtLmNhdGNoQ2xhdXNlKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFRyeUZpbmFsbHlTdGF0ZW1lbnQodGVybSkge1xuICAgIGxldCBjYXRjaENsYXVzZSA9XG4gICAgICB0ZXJtLmNhdGNoQ2xhdXNlID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS5jYXRjaENsYXVzZSk7XG4gICAgcmV0dXJuIG5ldyBULlRyeUZpbmFsbHlTdGF0ZW1lbnQoe1xuICAgICAgYm9keTogdGhpcy5leHBhbmQodGVybS5ib2R5KSxcbiAgICAgIGNhdGNoQ2xhdXNlLFxuICAgICAgZmluYWxpemVyOiB0aGlzLmV4cGFuZCh0ZXJtLmZpbmFsaXplciksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRDYXRjaENsYXVzZSh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULkNhdGNoQ2xhdXNlKHtcbiAgICAgIGJpbmRpbmc6IHRoaXMuZXhwYW5kKHRlcm0uYmluZGluZyksXG4gICAgICBib2R5OiB0aGlzLmV4cGFuZCh0ZXJtLmJvZHkpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kVGhyb3dTdGF0ZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5UaHJvd1N0YXRlbWVudCh7XG4gICAgICBleHByZXNzaW9uOiB0aGlzLmV4cGFuZCh0ZXJtLmV4cHJlc3Npb24pLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kRm9yT2ZTdGF0ZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5Gb3JPZlN0YXRlbWVudCh7XG4gICAgICBsZWZ0OiB0aGlzLmV4cGFuZCh0ZXJtLmxlZnQpLFxuICAgICAgcmlnaHQ6IHRoaXMuZXhwYW5kKHRlcm0ucmlnaHQpLFxuICAgICAgYm9keTogdGhpcy5leHBhbmQodGVybS5ib2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZEJpbmRpbmdJZGVudGlmaWVyKHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZEJpbmRpbmdQcm9wZXJ0eUlkZW50aWZpZXIodGVybSkge1xuICAgIHJldHVybiB0ZXJtO1xuICB9XG4gIGV4cGFuZEJpbmRpbmdQcm9wZXJ0eVByb3BlcnR5KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQmluZGluZ1Byb3BlcnR5UHJvcGVydHkoe1xuICAgICAgbmFtZTogdGhpcy5leHBhbmQodGVybS5uYW1lKSxcbiAgICAgIGJpbmRpbmc6IHRoaXMuZXhwYW5kKHRlcm0uYmluZGluZyksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRDb21wdXRlZFByb3BlcnR5TmFtZSh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULkNvbXB1dGVkUHJvcGVydHlOYW1lKHtcbiAgICAgIGV4cHJlc3Npb246IHRoaXMuZXhwYW5kKHRlcm0uZXhwcmVzc2lvbiksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRPYmplY3RCaW5kaW5nKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuT2JqZWN0QmluZGluZyh7XG4gICAgICBwcm9wZXJ0aWVzOiB0ZXJtLnByb3BlcnRpZXMubWFwKHQgPT4gdGhpcy5leHBhbmQodCkpLnRvQXJyYXkoKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZEFycmF5QmluZGluZyh0ZXJtKSB7XG4gICAgbGV0IHJlc3RFbGVtZW50ID1cbiAgICAgIHRlcm0ucmVzdEVsZW1lbnQgPT0gbnVsbCA/IG51bGwgOiB0aGlzLmV4cGFuZCh0ZXJtLnJlc3RFbGVtZW50KTtcbiAgICByZXR1cm4gbmV3IFQuQXJyYXlCaW5kaW5nKHtcbiAgICAgIGVsZW1lbnRzOiB0ZXJtLmVsZW1lbnRzXG4gICAgICAgIC5tYXAodCA9PiAodCA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHQpKSlcbiAgICAgICAgLnRvQXJyYXkoKSxcbiAgICAgIHJlc3RFbGVtZW50LFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kQmluZGluZ1dpdGhEZWZhdWx0KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQmluZGluZ1dpdGhEZWZhdWx0KHtcbiAgICAgIGJpbmRpbmc6IHRoaXMuZXhwYW5kKHRlcm0uYmluZGluZyksXG4gICAgICBpbml0OiB0aGlzLmV4cGFuZCh0ZXJtLmluaXQpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kU2hvcnRoYW5kUHJvcGVydHkodGVybSkge1xuICAgIC8vIGJlY2F1c2UgaHlnaWVuZSwgc2hvcnRoYW5kIHByb3BlcnRpZXMgbXVzdCB0dXJuIGludG8gRGF0YVByb3BlcnRpZXNcbiAgICByZXR1cm4gbmV3IFQuRGF0YVByb3BlcnR5KHtcbiAgICAgIG5hbWU6IG5ldyBULlN0YXRpY1Byb3BlcnR5TmFtZSh7XG4gICAgICAgIHZhbHVlOiB0ZXJtLm5hbWUsXG4gICAgICB9KSxcbiAgICAgIGV4cHJlc3Npb246IG5ldyBULklkZW50aWZpZXJFeHByZXNzaW9uKHtcbiAgICAgICAgbmFtZTogdGVybS5uYW1lLFxuICAgICAgfSksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRGb3JTdGF0ZW1lbnQodGVybSkge1xuICAgIGxldCBpbml0ID0gdGVybS5pbml0ID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS5pbml0KTtcbiAgICBsZXQgdGVzdCA9IHRlcm0udGVzdCA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHRlcm0udGVzdCk7XG4gICAgbGV0IHVwZGF0ZSA9IHRlcm0udXBkYXRlID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS51cGRhdGUpO1xuICAgIGxldCBib2R5ID0gdGhpcy5leHBhbmQodGVybS5ib2R5KTtcbiAgICByZXR1cm4gbmV3IFQuRm9yU3RhdGVtZW50KHsgaW5pdCwgdGVzdCwgdXBkYXRlLCBib2R5IH0pO1xuICB9XG5cbiAgZXhwYW5kWWllbGRFeHByZXNzaW9uKHRlcm0pIHtcbiAgICBsZXQgZXhwciA9IHRlcm0uZXhwcmVzc2lvbiA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHRlcm0uZXhwcmVzc2lvbik7XG4gICAgcmV0dXJuIG5ldyBULllpZWxkRXhwcmVzc2lvbih7XG4gICAgICBleHByZXNzaW9uOiBleHByLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kWWllbGRHZW5lcmF0b3JFeHByZXNzaW9uKHRlcm0pIHtcbiAgICBsZXQgZXhwciA9IHRlcm0uZXhwcmVzc2lvbiA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHRlcm0uZXhwcmVzc2lvbik7XG4gICAgcmV0dXJuIG5ldyBULllpZWxkR2VuZXJhdG9yRXhwcmVzc2lvbih7XG4gICAgICBleHByZXNzaW9uOiBleHByLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kV2hpbGVTdGF0ZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5XaGlsZVN0YXRlbWVudCh7XG4gICAgICB0ZXN0OiB0aGlzLmV4cGFuZCh0ZXJtLnRlc3QpLFxuICAgICAgYm9keTogdGhpcy5leHBhbmQodGVybS5ib2R5KSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZElmU3RhdGVtZW50KHRlcm0pIHtcbiAgICBsZXQgY29uc2VxdWVudCA9XG4gICAgICB0ZXJtLmNvbnNlcXVlbnQgPT0gbnVsbCA/IG51bGwgOiB0aGlzLmV4cGFuZCh0ZXJtLmNvbnNlcXVlbnQpO1xuICAgIGxldCBhbHRlcm5hdGUgPSB0ZXJtLmFsdGVybmF0ZSA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHRlcm0uYWx0ZXJuYXRlKTtcbiAgICByZXR1cm4gbmV3IFQuSWZTdGF0ZW1lbnQoe1xuICAgICAgdGVzdDogdGhpcy5leHBhbmQodGVybS50ZXN0KSxcbiAgICAgIGNvbnNlcXVlbnQ6IGNvbnNlcXVlbnQsXG4gICAgICBhbHRlcm5hdGU6IGFsdGVybmF0ZSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZEJsb2NrU3RhdGVtZW50KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQmxvY2tTdGF0ZW1lbnQoe1xuICAgICAgYmxvY2s6IHRoaXMuZXhwYW5kKHRlcm0uYmxvY2spLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kQmxvY2sodGVybSkge1xuICAgIGxldCBzY29wZSA9IGZyZXNoU2NvcGUoJ2Jsb2NrJyk7XG4gICAgdGhpcy5jb250ZXh0LmN1cnJlbnRTY29wZS5wdXNoKHNjb3BlKTtcbiAgICBsZXQgY29tcGlsZXIgPSBuZXcgQ29tcGlsZXIoXG4gICAgICB0aGlzLmNvbnRleHQucGhhc2UsXG4gICAgICB0aGlzLmNvbnRleHQuZW52LFxuICAgICAgdGhpcy5jb250ZXh0LnN0b3JlLFxuICAgICAgdGhpcy5jb250ZXh0LFxuICAgICk7XG5cbiAgICBsZXQgbWFya2VkQm9keSwgYm9keVRlcm07XG4gICAgbWFya2VkQm9keSA9IHRlcm0uc3RhdGVtZW50cy5tYXAoYiA9PlxuICAgICAgYi5yZWR1Y2UoXG4gICAgICAgIG5ldyBTY29wZVJlZHVjZXIoXG4gICAgICAgICAgW3sgc2NvcGUsIHBoYXNlOiBBTExfUEhBU0VTLCBmbGlwOiBmYWxzZSB9XSxcbiAgICAgICAgICB0aGlzLmNvbnRleHQuYmluZGluZ3MsXG4gICAgICAgICksXG4gICAgICApLFxuICAgICk7XG4gICAgYm9keVRlcm0gPSBuZXcgVC5CbG9jayh7XG4gICAgICBzdGF0ZW1lbnRzOiBjb21waWxlci5jb21waWxlKG1hcmtlZEJvZHkpLFxuICAgIH0pO1xuICAgIHRoaXMuY29udGV4dC5jdXJyZW50U2NvcGUucG9wKCk7XG4gICAgcmV0dXJuIGJvZHlUZXJtO1xuICB9XG5cbiAgZXhwYW5kVmFyaWFibGVEZWNsYXJhdGlvblN0YXRlbWVudCh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULlZhcmlhYmxlRGVjbGFyYXRpb25TdGF0ZW1lbnQoe1xuICAgICAgZGVjbGFyYXRpb246IHRoaXMuZXhwYW5kKHRlcm0uZGVjbGFyYXRpb24pLFxuICAgIH0pO1xuICB9XG4gIGV4cGFuZFJldHVyblN0YXRlbWVudCh0ZXJtKSB7XG4gICAgaWYgKHRlcm0uZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGVybTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBULlJldHVyblN0YXRlbWVudCh7XG4gICAgICBleHByZXNzaW9uOiB0aGlzLmV4cGFuZCh0ZXJtLmV4cHJlc3Npb24pLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kQ2xhc3NEZWNsYXJhdGlvbih0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULkNsYXNzRGVjbGFyYXRpb24oe1xuICAgICAgbmFtZTogdGVybS5uYW1lID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS5uYW1lKSxcbiAgICAgIHN1cGVyOiB0ZXJtLnN1cGVyID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS5zdXBlciksXG4gICAgICBlbGVtZW50czogdGVybS5lbGVtZW50cy5tYXAoZWwgPT4gdGhpcy5leHBhbmQoZWwpKS50b0FycmF5KCksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRDbGFzc0V4cHJlc3Npb24odGVybSkge1xuICAgIHJldHVybiBuZXcgVC5DbGFzc0V4cHJlc3Npb24oe1xuICAgICAgbmFtZTogdGVybS5uYW1lID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS5uYW1lKSxcbiAgICAgIHN1cGVyOiB0ZXJtLnN1cGVyID09IG51bGwgPyBudWxsIDogdGhpcy5leHBhbmQodGVybS5zdXBlciksXG4gICAgICBlbGVtZW50czogdGVybS5lbGVtZW50cy5tYXAoZWwgPT4gdGhpcy5leHBhbmQoZWwpKS50b0FycmF5KCksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRDbGFzc0VsZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5DbGFzc0VsZW1lbnQoe1xuICAgICAgaXNTdGF0aWM6IHRlcm0uaXNTdGF0aWMsXG4gICAgICBtZXRob2Q6IHRoaXMuZXhwYW5kKHRlcm0ubWV0aG9kKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFRoaXNFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZFN5bnRheFRlbXBsYXRlKHRlcm0pIHtcbiAgICBsZXQgciA9IHByb2Nlc3NUZW1wbGF0ZSh0ZXJtLnRlbXBsYXRlLnNsaWNlKDEsIHRlcm0udGVtcGxhdGUuc2l6ZSAtIDEpKTtcbiAgICBsZXQgaWRlbnQgPSB0aGlzLmNvbnRleHQuZ2V0VGVtcGxhdGVJZGVudGlmaWVyKCk7XG4gICAgdGhpcy5jb250ZXh0LnRlbXBsYXRlTWFwLnNldChpZGVudCwgci50ZW1wbGF0ZSk7XG4gICAgbGV0IG5hbWUgPSBTeW50YXguZnJvbUlkZW50aWZpZXIoXG4gICAgICAnc3ludGF4VGVtcGxhdGUnLFxuICAgICAgdGVybS50ZW1wbGF0ZS5maXJzdCgpLnZhbHVlLFxuICAgICk7XG4gICAgbGV0IGNhbGxlZSA9IG5ldyBULklkZW50aWZpZXJFeHByZXNzaW9uKHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgfSk7XG5cbiAgICBsZXQgZXhwYW5kZWRJbnRlcnBzID0gci5pbnRlcnAubWFwKGkgPT4ge1xuICAgICAgbGV0IGVuZiA9IG5ldyBFbmZvcmVzdGVyKGksIExpc3QoKSwgdGhpcy5jb250ZXh0KTtcbiAgICAgIHJldHVybiB0aGlzLmV4cGFuZChlbmYuZW5mb3Jlc3QoJ2V4cHJlc3Npb24nKSk7XG4gICAgfSk7XG5cbiAgICBsZXQgYXJncyA9IExpc3Qub2YobmV3IFQuTGl0ZXJhbE51bWVyaWNFeHByZXNzaW9uKHsgdmFsdWU6IGlkZW50IH0pKS5jb25jYXQoXG4gICAgICBleHBhbmRlZEludGVycHMsXG4gICAgKTtcblxuICAgIHJldHVybiBuZXcgVC5DYWxsRXhwcmVzc2lvbih7XG4gICAgICBjYWxsZWUsXG4gICAgICBhcmd1bWVudHM6IGFyZ3MsXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRTdGF0aWNNZW1iZXJFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuU3RhdGljTWVtYmVyRXhwcmVzc2lvbih7XG4gICAgICBvYmplY3Q6IHRoaXMuZXhwYW5kKHRlcm0ub2JqZWN0KSxcbiAgICAgIHByb3BlcnR5OiB0ZXJtLnByb3BlcnR5LFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kQXJyYXlFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQXJyYXlFeHByZXNzaW9uKHtcbiAgICAgIGVsZW1lbnRzOiB0ZXJtLmVsZW1lbnRzLm1hcCh0ID0+ICh0ID09IG51bGwgPyB0IDogdGhpcy5leHBhbmQodCkpKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZEltcG9ydCh0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmRJbXBvcnROYW1lc3BhY2UodGVybSkge1xuICAgIHJldHVybiB0ZXJtO1xuICB9XG5cbiAgZXhwYW5kRXhwb3J0KHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuRXhwb3J0KHtcbiAgICAgIGRlY2xhcmF0aW9uOiB0aGlzLmV4cGFuZCh0ZXJtLmRlY2xhcmF0aW9uKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZEV4cG9ydERlZmF1bHQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5FeHBvcnREZWZhdWx0KHtcbiAgICAgIGJvZHk6IHRoaXMuZXhwYW5kKHRlcm0uYm9keSksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRFeHBvcnRGcm9tKHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZEV4cG9ydEFsbEZyb20odGVybSkge1xuICAgIHJldHVybiB0ZXJtO1xuICB9XG5cbiAgZXhwYW5kRXhwb3J0U3BlY2lmaWVyKHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZFN0YXRpY1Byb3BlcnR5TmFtZSh0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmREYXRhUHJvcGVydHkodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5EYXRhUHJvcGVydHkoe1xuICAgICAgbmFtZTogdGhpcy5leHBhbmQodGVybS5uYW1lKSxcbiAgICAgIGV4cHJlc3Npb246IHRoaXMuZXhwYW5kKHRlcm0uZXhwcmVzc2lvbiksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRPYmplY3RFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuT2JqZWN0RXhwcmVzc2lvbih7XG4gICAgICBwcm9wZXJ0aWVzOiB0ZXJtLnByb3BlcnRpZXMubWFwKHQgPT4gdGhpcy5leHBhbmQodCkpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kVmFyaWFibGVEZWNsYXJhdG9yKHRlcm0pIHtcbiAgICBsZXQgaW5pdCA9IHRlcm0uaW5pdCA9PSBudWxsID8gbnVsbCA6IHRoaXMuZXhwYW5kKHRlcm0uaW5pdCk7XG4gICAgcmV0dXJuIG5ldyBULlZhcmlhYmxlRGVjbGFyYXRvcih7XG4gICAgICBiaW5kaW5nOiB0aGlzLmV4cGFuZCh0ZXJtLmJpbmRpbmcpLFxuICAgICAgaW5pdDogaW5pdCxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFZhcmlhYmxlRGVjbGFyYXRpb24odGVybSkge1xuICAgIGlmIChcbiAgICAgIHRlcm0ua2luZCA9PT0gJ3N5bnRheCcgfHxcbiAgICAgIHRlcm0ua2luZCA9PT0gJ3N5bnRheHJlYycgfHxcbiAgICAgIHRlcm0ua2luZCA9PT0gJ29wZXJhdG9yJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRlcm07XG4gICAgfVxuICAgIHJldHVybiBuZXcgVC5WYXJpYWJsZURlY2xhcmF0aW9uKHtcbiAgICAgIGtpbmQ6IHRlcm0ua2luZCxcbiAgICAgIGRlY2xhcmF0b3JzOiB0ZXJtLmRlY2xhcmF0b3JzLm1hcChkID0+IHRoaXMuZXhwYW5kKGQpKSxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFBhcmVudGhlc2l6ZWRFeHByZXNzaW9uKHRlcm0pIHtcbiAgICBpZiAodGVybS5pbm5lci5zaXplID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuZXhwZWN0ZWQgZW5kIG9mIGlucHV0Jyk7XG4gICAgfVxuICAgIGxldCBlbmYgPSBuZXcgRW5mb3Jlc3Rlcih0ZXJtLmlubmVyLCBMaXN0KCksIHRoaXMuY29udGV4dCk7XG4gICAgbGV0IGxvb2thaGVhZCA9IGVuZi5wZWVrKCk7XG4gICAgbGV0IHQgPSBlbmYuZW5mb3Jlc3RFeHByZXNzaW9uKCk7XG4gICAgaWYgKHQgPT0gbnVsbCB8fCBlbmYucmVzdC5zaXplID4gMCkge1xuICAgICAgaWYgKGVuZi5yZXN0LnNpemUgPT09IDApIHtcbiAgICAgICAgdGhyb3cgZW5mLmNyZWF0ZUVycm9yKCcpJywgJ3VuZXhwZWN0ZWQgdG9rZW4nKTtcbiAgICAgIH1cbiAgICAgIHRocm93IGVuZi5jcmVhdGVFcnJvcihsb29rYWhlYWQsICd1bmV4cGVjdGVkIHN5bnRheCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5leHBhbmQodCk7XG4gIH1cblxuICBleHBhbmRVbmFyeUV4cHJlc3Npb24odGVybSkge1xuICAgIHJldHVybiBuZXcgVC5VbmFyeUV4cHJlc3Npb24oe1xuICAgICAgb3BlcmF0b3I6IHRlcm0ub3BlcmF0b3IsXG4gICAgICBvcGVyYW5kOiB0aGlzLmV4cGFuZCh0ZXJtLm9wZXJhbmQpLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kVXBkYXRlRXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULlVwZGF0ZUV4cHJlc3Npb24oe1xuICAgICAgaXNQcmVmaXg6IHRlcm0uaXNQcmVmaXgsXG4gICAgICBvcGVyYXRvcjogdGVybS5vcGVyYXRvcixcbiAgICAgIG9wZXJhbmQ6IHRoaXMuZXhwYW5kKHRlcm0ub3BlcmFuZCksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRCaW5hcnlFeHByZXNzaW9uKHRlcm0pIHtcbiAgICBsZXQgbGVmdCA9IHRoaXMuZXhwYW5kKHRlcm0ubGVmdCk7XG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5leHBhbmQodGVybS5yaWdodCk7XG4gICAgcmV0dXJuIG5ldyBULkJpbmFyeUV4cHJlc3Npb24oe1xuICAgICAgbGVmdDogbGVmdCxcbiAgICAgIG9wZXJhdG9yOiB0ZXJtLm9wZXJhdG9yLFxuICAgICAgcmlnaHQ6IHJpZ2h0LFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kQ29uZGl0aW9uYWxFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gbmV3IFQuQ29uZGl0aW9uYWxFeHByZXNzaW9uKHtcbiAgICAgIHRlc3Q6IHRoaXMuZXhwYW5kKHRlcm0udGVzdCksXG4gICAgICBjb25zZXF1ZW50OiB0aGlzLmV4cGFuZCh0ZXJtLmNvbnNlcXVlbnQpLFxuICAgICAgYWx0ZXJuYXRlOiB0aGlzLmV4cGFuZCh0ZXJtLmFsdGVybmF0ZSksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmROZXdUYXJnZXRFeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZE5ld0V4cHJlc3Npb24odGVybSkge1xuICAgIGxldCBjYWxsZWUgPSB0aGlzLmV4cGFuZCh0ZXJtLmNhbGxlZSk7XG4gICAgbGV0IGVuZiA9IG5ldyBFbmZvcmVzdGVyKHRlcm0uYXJndW1lbnRzLCBMaXN0KCksIHRoaXMuY29udGV4dCk7XG4gICAgbGV0IGFyZ3MgPSBlbmYuZW5mb3Jlc3RBcmd1bWVudExpc3QoKS5tYXAoYXJnID0+IHRoaXMuZXhwYW5kKGFyZykpO1xuICAgIHJldHVybiBuZXcgVC5OZXdFeHByZXNzaW9uKHtcbiAgICAgIGNhbGxlZSxcbiAgICAgIGFyZ3VtZW50czogYXJncy50b0FycmF5KCksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRTdXBlcih0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmRDYWxsRXhwcmVzc2lvbkUodGVybSkge1xuICAgIGxldCBjYWxsZWUgPSB0aGlzLmV4cGFuZCh0ZXJtLmNhbGxlZSk7XG4gICAgbGV0IGVuZiA9IG5ldyBFbmZvcmVzdGVyKHRlcm0uYXJndW1lbnRzLCBMaXN0KCksIHRoaXMuY29udGV4dCk7XG4gICAgbGV0IGFyZ3MgPSBlbmYuZW5mb3Jlc3RBcmd1bWVudExpc3QoKS5tYXAoYXJnID0+IHRoaXMuZXhwYW5kKGFyZykpO1xuICAgIHJldHVybiBuZXcgVC5DYWxsRXhwcmVzc2lvbih7XG4gICAgICBjYWxsZWU6IGNhbGxlZSxcbiAgICAgIGFyZ3VtZW50czogYXJncyxcbiAgICB9KTtcbiAgfVxuXG4gIGV4cGFuZFNwcmVhZEVsZW1lbnQodGVybSkge1xuICAgIHJldHVybiBuZXcgVC5TcHJlYWRFbGVtZW50KHtcbiAgICAgIGV4cHJlc3Npb246IHRoaXMuZXhwYW5kKHRlcm0uZXhwcmVzc2lvbiksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRFeHByZXNzaW9uU3RhdGVtZW50KHRlcm0pIHtcbiAgICBsZXQgY2hpbGQgPSB0aGlzLmV4cGFuZCh0ZXJtLmV4cHJlc3Npb24pO1xuICAgIHJldHVybiBuZXcgVC5FeHByZXNzaW9uU3RhdGVtZW50KHtcbiAgICAgIGV4cHJlc3Npb246IGNoaWxkLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kTGFiZWxlZFN0YXRlbWVudCh0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULkxhYmVsZWRTdGF0ZW1lbnQoe1xuICAgICAgbGFiZWw6IHRlcm0ubGFiZWwudmFsKCksXG4gICAgICBib2R5OiB0aGlzLmV4cGFuZCh0ZXJtLmJvZHkpLFxuICAgIH0pO1xuICB9XG5cbiAgZG9GdW5jdGlvbkV4cGFuc2lvbih0ZXJtLCB0eXBlKSB7XG4gICAgbGV0IHNjb3BlID0gZnJlc2hTY29wZSgnZnVuJyk7XG4gICAgbGV0IHBhcmFtcztcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHR5cGUgIT09ICdHZXR0ZXInICYmIHR5cGUgIT09ICdTZXR0ZXInKSB7XG4gICAgICAvLyBUT0RPOiBuZWVkIHRvIHJlZ2lzdGVyIHRoZSBwYXJhbWV0ZXIgYmluZGluZ3MgYWdhaW5cbiAgICAgIHBhcmFtcyA9IHRlcm0ucGFyYW1zLnJlZHVjZShcbiAgICAgICAgbmV3IGNsYXNzIGV4dGVuZHMgVGVybS5DbG9uZVJlZHVjZXIge1xuICAgICAgICAgIHJlZHVjZUJpbmRpbmdJZGVudGlmaWVyKHRlcm0pIHtcbiAgICAgICAgICAgIGxldCBuYW1lID0gdGVybS5uYW1lLmFkZFNjb3BlKFxuICAgICAgICAgICAgICBzY29wZSxcbiAgICAgICAgICAgICAgc2VsZi5jb250ZXh0LmJpbmRpbmdzLFxuICAgICAgICAgICAgICBBTExfUEhBU0VTLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGxldCBuZXdCaW5kaW5nID0gZ2Vuc3ltKG5hbWUudmFsKCkpO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRleHQuZW52LnNldChcbiAgICAgICAgICAgICAgbmV3QmluZGluZy50b1N0cmluZygpLFxuICAgICAgICAgICAgICBuZXcgVmFyQmluZGluZ1RyYW5zZm9ybShuYW1lKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBzZWxmLmNvbnRleHQuYmluZGluZ3MuYWRkKG5hbWUsIHtcbiAgICAgICAgICAgICAgYmluZGluZzogbmV3QmluZGluZyxcbiAgICAgICAgICAgICAgcGhhc2U6IHNlbGYuY29udGV4dC5waGFzZSxcbiAgICAgICAgICAgICAgc2tpcER1cDogdHJ1ZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBULkJpbmRpbmdJZGVudGlmaWVyKHsgbmFtZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0oKSxcbiAgICAgICk7XG4gICAgICBwYXJhbXMgPSB0aGlzLmV4cGFuZChwYXJhbXMpO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHQuY3VycmVudFNjb3BlLnB1c2goc2NvcGUpO1xuICAgIGxldCBjb21waWxlciA9IG5ldyBDb21waWxlcihcbiAgICAgIHRoaXMuY29udGV4dC5waGFzZSxcbiAgICAgIHRoaXMuY29udGV4dC5lbnYsXG4gICAgICB0aGlzLmNvbnRleHQuc3RvcmUsXG4gICAgICB0aGlzLmNvbnRleHQsXG4gICAgKTtcblxuICAgIGxldCBib2R5VGVybTtcbiAgICBsZXQgc2NvcGVSZWR1Y2VyID0gbmV3IFNjb3BlUmVkdWNlcihcbiAgICAgIFt7IHNjb3BlLCBwaGFzZTogQUxMX1BIQVNFUywgZmxpcDogZmFsc2UgfV0sXG4gICAgICB0aGlzLmNvbnRleHQuYmluZGluZ3MsXG4gICAgKTtcbiAgICBpZiAodGVybS5ib2R5IGluc3RhbmNlb2YgVGVybSkge1xuICAgICAgLy8gQXJyb3cgZnVuY3Rpb25zIGhhdmUgYSBzaW5nbGUgdGVybSBhcyB0aGVpciBib2R5XG4gICAgICBib2R5VGVybSA9IHRoaXMuZXhwYW5kKHRlcm0uYm9keS5yZWR1Y2Uoc2NvcGVSZWR1Y2VyKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBjb21waWxlZEJvZHkgPSBjb21waWxlci5jb21waWxlKFxuICAgICAgICB0ZXJtLmJvZHkubWFwKGIgPT4gYi5yZWR1Y2Uoc2NvcGVSZWR1Y2VyKSksXG4gICAgICApO1xuICAgICAgY29uc3QgZGlyZWN0aXZlcyA9IGNvbXBpbGVkQm9keVxuICAgICAgICAudGFrZVdoaWxlKFxuICAgICAgICAgIHMgPT5cbiAgICAgICAgICAgIGlzRXhwcmVzc2lvblN0YXRlbWVudChzKSAmJiBpc0xpdGVyYWxTdHJpbmdFeHByZXNzaW9uKHMuZXhwcmVzc2lvbiksXG4gICAgICAgIClcbiAgICAgICAgLm1hcChzID0+IG5ldyBULkRpcmVjdGl2ZSh7IHJhd1ZhbHVlOiBzLmV4cHJlc3Npb24udmFsdWUgfSkpO1xuICAgICAgYm9keVRlcm0gPSBuZXcgVC5GdW5jdGlvbkJvZHkoe1xuICAgICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgICBzdGF0ZW1lbnRzOiBjb21waWxlZEJvZHkuc2xpY2UoZGlyZWN0aXZlcy5zaXplKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHQuY3VycmVudFNjb3BlLnBvcCgpO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdHZXR0ZXInOlxuICAgICAgICByZXR1cm4gbmV3IFQuR2V0dGVyKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmV4cGFuZCh0ZXJtLm5hbWUpLFxuICAgICAgICAgIGJvZHk6IGJvZHlUZXJtLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgJ1NldHRlcic6XG4gICAgICAgIHJldHVybiBuZXcgVC5TZXR0ZXIoe1xuICAgICAgICAgIG5hbWU6IHRoaXMuZXhwYW5kKHRlcm0ubmFtZSksXG4gICAgICAgICAgcGFyYW06IHRlcm0ucGFyYW0sXG4gICAgICAgICAgYm9keTogYm9keVRlcm0sXG4gICAgICAgIH0pO1xuICAgICAgY2FzZSAnTWV0aG9kJzpcbiAgICAgICAgcmV0dXJuIG5ldyBULk1ldGhvZCh7XG4gICAgICAgICAgbmFtZTogdGVybS5uYW1lLFxuICAgICAgICAgIGlzR2VuZXJhdG9yOiB0ZXJtLmlzR2VuZXJhdG9yLFxuICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgIGJvZHk6IGJvZHlUZXJtLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgJ0Fycm93RXhwcmVzc2lvbic6XG4gICAgICAgIHJldHVybiBuZXcgVC5BcnJvd0V4cHJlc3Npb24oe1xuICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxuICAgICAgICAgIGJvZHk6IGJvZHlUZXJtLFxuICAgICAgICB9KTtcbiAgICAgIGNhc2UgJ0Z1bmN0aW9uRXhwcmVzc2lvbic6XG4gICAgICAgIHJldHVybiBuZXcgVC5GdW5jdGlvbkV4cHJlc3Npb24oe1xuICAgICAgICAgIG5hbWU6IHRlcm0ubmFtZSxcbiAgICAgICAgICBpc0dlbmVyYXRvcjogdGVybS5pc0dlbmVyYXRvcixcbiAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICBib2R5OiBib2R5VGVybSxcbiAgICAgICAgfSk7XG4gICAgICBjYXNlICdGdW5jdGlvbkRlY2xhcmF0aW9uJzpcbiAgICAgICAgcmV0dXJuIG5ldyBULkZ1bmN0aW9uRGVjbGFyYXRpb24oe1xuICAgICAgICAgIG5hbWU6IHRlcm0ubmFtZSxcbiAgICAgICAgICBpc0dlbmVyYXRvcjogdGVybS5pc0dlbmVyYXRvcixcbiAgICAgICAgICBwYXJhbXM6IHBhcmFtcyxcbiAgICAgICAgICBib2R5OiBib2R5VGVybSxcbiAgICAgICAgfSk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZnVuY3Rpb24gdHlwZTogJHt0eXBlfWApO1xuICAgIH1cbiAgfVxuXG4gIGV4cGFuZE1ldGhvZCh0ZXJtKSB7XG4gICAgcmV0dXJuIHRoaXMuZG9GdW5jdGlvbkV4cGFuc2lvbih0ZXJtLCAnTWV0aG9kJyk7XG4gIH1cblxuICBleHBhbmRTZXR0ZXIodGVybSkge1xuICAgIHJldHVybiB0aGlzLmRvRnVuY3Rpb25FeHBhbnNpb24odGVybSwgJ1NldHRlcicpO1xuICB9XG5cbiAgZXhwYW5kR2V0dGVyKHRlcm0pIHtcbiAgICByZXR1cm4gdGhpcy5kb0Z1bmN0aW9uRXhwYW5zaW9uKHRlcm0sICdHZXR0ZXInKTtcbiAgfVxuXG4gIGV4cGFuZEZ1bmN0aW9uRGVjbGFyYXRpb25FKHRlcm0pIHtcbiAgICByZXR1cm4gdGhpcy5kb0Z1bmN0aW9uRXhwYW5zaW9uKHRlcm0sICdGdW5jdGlvbkRlY2xhcmF0aW9uJyk7XG4gIH1cblxuICBleHBhbmRGdW5jdGlvbkV4cHJlc3Npb25FKHRlcm0pIHtcbiAgICByZXR1cm4gdGhpcy5kb0Z1bmN0aW9uRXhwYW5zaW9uKHRlcm0sICdGdW5jdGlvbkV4cHJlc3Npb24nKTtcbiAgfVxuXG4gIGV4cGFuZENvbXBvdW5kQXNzaWdubWVudEV4cHJlc3Npb24odGVybSkge1xuICAgIHJldHVybiBuZXcgVC5Db21wb3VuZEFzc2lnbm1lbnRFeHByZXNzaW9uKHtcbiAgICAgIGJpbmRpbmc6IHRoaXMuZXhwYW5kKHRlcm0uYmluZGluZyksXG4gICAgICBvcGVyYXRvcjogdGVybS5vcGVyYXRvcixcbiAgICAgIGV4cHJlc3Npb246IHRoaXMuZXhwYW5kKHRlcm0uZXhwcmVzc2lvbiksXG4gICAgfSk7XG4gIH1cblxuICBleHBhbmRBc3NpZ25tZW50RXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIG5ldyBULkFzc2lnbm1lbnRFeHByZXNzaW9uKHtcbiAgICAgIGJpbmRpbmc6IHRoaXMuZXhwYW5kKHRlcm0uYmluZGluZyksXG4gICAgICBleHByZXNzaW9uOiB0aGlzLmV4cGFuZCh0ZXJtLmV4cHJlc3Npb24pLFxuICAgIH0pO1xuICB9XG5cbiAgZXhwYW5kRW1wdHlTdGF0ZW1lbnQodGVybSkge1xuICAgIHJldHVybiB0ZXJtO1xuICB9XG5cbiAgZXhwYW5kTGl0ZXJhbEJvb2xlYW5FeHByZXNzaW9uKHRlcm0pIHtcbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZExpdGVyYWxOdW1lcmljRXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cbiAgZXhwYW5kTGl0ZXJhbEluZmluaXR5RXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmRJZGVudGlmaWVyRXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgbGV0IHRyYW5zID0gdGhpcy5jb250ZXh0LmVudi5nZXQodGVybS5uYW1lLnJlc29sdmUodGhpcy5jb250ZXh0LnBoYXNlKSk7XG4gICAgaWYgKHRyYW5zKSB7XG4gICAgICByZXR1cm4gbmV3IFQuSWRlbnRpZmllckV4cHJlc3Npb24oe1xuICAgICAgICBuYW1lOiB0cmFucy5pZCxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGVybTtcbiAgfVxuXG4gIGV4cGFuZExpdGVyYWxOdWxsRXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmRMaXRlcmFsU3RyaW5nRXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cblxuICBleHBhbmRMaXRlcmFsUmVnRXhwRXhwcmVzc2lvbih0ZXJtKSB7XG4gICAgcmV0dXJuIHRlcm07XG4gIH1cbn1cbiJdfQ==