'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.parse = parse;
exports.compile = compile;

var _babelCore = require('babel-core');

function compileModule(entryPath, loader, refererName) {
  return loader.compile(entryPath, {
    refererName,
    enforceLangPragma: false,
    isEntrypoint: true
  });
}

function parse(entryPath, loader, options) {
  let refererName;
  if (options != null) {
    refererName = options.refererName;
  }
  return compileModule(entryPath, loader, refererName).parse();
}

function compile(entryPath, loader, options) {
  let refererName,
      noBabel = true;
  if (options != null) {
    refererName = options.refererName;
    noBabel = options.noBabel;
  }
  let code = compileModule(entryPath, loader, refererName).codegen();
  if (noBabel) {
    return {
      code
    };
  }
  return (0, _babelCore.transform)(code, {
    babelrc: true
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zd2VldC5qcyJdLCJuYW1lcyI6WyJwYXJzZSIsImNvbXBpbGUiLCJjb21waWxlTW9kdWxlIiwiZW50cnlQYXRoIiwibG9hZGVyIiwicmVmZXJlck5hbWUiLCJlbmZvcmNlTGFuZ1ByYWdtYSIsImlzRW50cnlwb2ludCIsIm9wdGlvbnMiLCJub0JhYmVsIiwiY29kZSIsImNvZGVnZW4iLCJiYWJlbHJjIl0sIm1hcHBpbmdzIjoiOzs7OztRQXVCZ0JBLEssR0FBQUEsSztRQVlBQyxPLEdBQUFBLE87O0FBakNoQjs7QUFTQSxTQUFTQyxhQUFULENBQ0VDLFNBREYsRUFFRUMsTUFGRixFQUdFQyxXQUhGLEVBSUU7QUFDQSxTQUFPRCxPQUFPSCxPQUFQLENBQWVFLFNBQWYsRUFBMEI7QUFDL0JFLGVBRCtCO0FBRS9CQyx1QkFBbUIsS0FGWTtBQUcvQkMsa0JBQWM7QUFIaUIsR0FBMUIsQ0FBUDtBQUtEOztBQUVNLFNBQVNQLEtBQVQsQ0FDTEcsU0FESyxFQUVMQyxNQUZLLEVBR0xJLE9BSEssRUFJTDtBQUNBLE1BQUlILFdBQUo7QUFDQSxNQUFJRyxXQUFXLElBQWYsRUFBcUI7QUFDbkJILGtCQUFjRyxRQUFRSCxXQUF0QjtBQUNEO0FBQ0QsU0FBT0gsY0FBY0MsU0FBZCxFQUF5QkMsTUFBekIsRUFBaUNDLFdBQWpDLEVBQThDTCxLQUE5QyxFQUFQO0FBQ0Q7O0FBRU0sU0FBU0MsT0FBVCxDQUNMRSxTQURLLEVBRUxDLE1BRkssRUFHTEksT0FISyxFQUlMO0FBQ0EsTUFBSUgsV0FBSjtBQUFBLE1BQ0VJLFVBQVUsSUFEWjtBQUVBLE1BQUlELFdBQVcsSUFBZixFQUFxQjtBQUNuQkgsa0JBQWNHLFFBQVFILFdBQXRCO0FBQ0FJLGNBQVVELFFBQVFDLE9BQWxCO0FBQ0Q7QUFDRCxNQUFJQyxPQUFPUixjQUFjQyxTQUFkLEVBQXlCQyxNQUF6QixFQUFpQ0MsV0FBakMsRUFBOENNLE9BQTlDLEVBQVg7QUFDQSxNQUFJRixPQUFKLEVBQWE7QUFDWCxXQUFPO0FBQ0xDO0FBREssS0FBUDtBQUdEO0FBQ0QsU0FBTywwQkFBTUEsSUFBTixFQUFZO0FBQ2pCRSxhQUFTO0FBRFEsR0FBWixDQUFQO0FBR0QiLCJmaWxlIjoic3dlZXQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAZmxvd1xuaW1wb3J0IHR5cGUgU3dlZXRMb2FkZXIgZnJvbSAnLi9zd2VldC1sb2FkZXInO1xuaW1wb3J0IHsgdHJhbnNmb3JtIGFzIGJhYmVsIH0gZnJvbSAnYmFiZWwtY29yZSc7XG5cbnR5cGUgQ29tcGlsZU9wdGlvbnMgPSB7XG4gIHJlZmVyZXJOYW1lPzogc3RyaW5nLFxuICBkZWJ1Z1N0b3JlPzogTWFwPHN0cmluZywgc3RyaW5nPixcbiAgbm9CYWJlbD86IGJvb2xlYW4sXG4gIGxvYWRlcjogU3dlZXRMb2FkZXIsXG59O1xuXG5mdW5jdGlvbiBjb21waWxlTW9kdWxlKFxuICBlbnRyeVBhdGg6IHN0cmluZyxcbiAgbG9hZGVyOiBTd2VldExvYWRlcixcbiAgcmVmZXJlck5hbWU/OiBzdHJpbmcsXG4pIHtcbiAgcmV0dXJuIGxvYWRlci5jb21waWxlKGVudHJ5UGF0aCwge1xuICAgIHJlZmVyZXJOYW1lLFxuICAgIGVuZm9yY2VMYW5nUHJhZ21hOiBmYWxzZSxcbiAgICBpc0VudHJ5cG9pbnQ6IHRydWUsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2UoXG4gIGVudHJ5UGF0aDogc3RyaW5nLFxuICBsb2FkZXI6IFN3ZWV0TG9hZGVyLFxuICBvcHRpb25zPzogQ29tcGlsZU9wdGlvbnMsXG4pIHtcbiAgbGV0IHJlZmVyZXJOYW1lO1xuICBpZiAob3B0aW9ucyAhPSBudWxsKSB7XG4gICAgcmVmZXJlck5hbWUgPSBvcHRpb25zLnJlZmVyZXJOYW1lO1xuICB9XG4gIHJldHVybiBjb21waWxlTW9kdWxlKGVudHJ5UGF0aCwgbG9hZGVyLCByZWZlcmVyTmFtZSkucGFyc2UoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBpbGUoXG4gIGVudHJ5UGF0aDogc3RyaW5nLFxuICBsb2FkZXI6IFN3ZWV0TG9hZGVyLFxuICBvcHRpb25zPzogQ29tcGlsZU9wdGlvbnMsXG4pIHtcbiAgbGV0IHJlZmVyZXJOYW1lLFxuICAgIG5vQmFiZWwgPSB0cnVlO1xuICBpZiAob3B0aW9ucyAhPSBudWxsKSB7XG4gICAgcmVmZXJlck5hbWUgPSBvcHRpb25zLnJlZmVyZXJOYW1lO1xuICAgIG5vQmFiZWwgPSBvcHRpb25zLm5vQmFiZWw7XG4gIH1cbiAgbGV0IGNvZGUgPSBjb21waWxlTW9kdWxlKGVudHJ5UGF0aCwgbG9hZGVyLCByZWZlcmVyTmFtZSkuY29kZWdlbigpO1xuICBpZiAobm9CYWJlbCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2RlLFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIGJhYmVsKGNvZGUsIHtcbiAgICBiYWJlbHJjOiB0cnVlLFxuICB9KTtcbn1cbiJdfQ==