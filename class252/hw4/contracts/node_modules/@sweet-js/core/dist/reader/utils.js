'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isTerminating = exports.isIdentifierPart = exports.isIdentifierStart = exports.isDecimalDigit = exports.isWhiteSpace = exports.isLineTerminator = undefined;
exports.getHexValue = getHexValue;
exports.skipSingleLineComment = skipSingleLineComment;
exports.scanUnicode = scanUnicode;
exports.readStringEscape = readStringEscape;
exports.insertSequence = insertSequence;
exports.retrieveSequenceLength = retrieveSequenceLength;
exports.isExprPrefix = isExprPrefix;
exports.isRegexPrefix = isRegexPrefix;

var _readtable = require('readtable');

var _immutable = require('immutable');

var _esutils = require('esutils');

var _tokens = require('../tokens');

var _ramda = require('ramda');

var R = _interopRequireWildcard(_ramda);

var _ramdaFantasy = require('ramda-fantasy');

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

const {
  isLineTerminator,
  isWhiteSpace,
  isDecimalDigit,
  isIdentifierPartES6: isIdentifierPart,
  isIdentifierStartES6: isIdentifierStart
} = _esutils.code;

const Nothing = _ramdaFantasy.Maybe.Nothing;

// TODO: also, need to handle contextual yield
const literalKeywords = ['this', 'null', 'true', 'false'];

exports.isLineTerminator = isLineTerminator;
exports.isWhiteSpace = isWhiteSpace;
exports.isDecimalDigit = isDecimalDigit;
exports.isIdentifierStart = isIdentifierStart;
exports.isIdentifierPart = isIdentifierPart;
function getHexValue(rune) {
  if ('0' <= rune && rune <= '9') {
    return rune.charCodeAt(0) - 48;
  }
  if ('a' <= rune && rune <= 'f') {
    return rune.charCodeAt(0) - 87;
  }
  if ('A' <= rune && rune <= 'F') {
    return rune.charCodeAt(0) - 55;
  }
  return -1;
}

function skipSingleLineComment(stream) {
  let idx = 0;
  let char = stream.peek(idx);
  while (!(0, _readtable.isEOS)(char)) {
    let chCode = char.charCodeAt(0);
    if (isLineTerminator(chCode)) {
      ++idx;
      if (chCode === 0xd /* "\r" */ && stream.peek(idx).charCodeAt(0) === 0xa) {
        /*"\n" */++idx;
      }
      this.incrementLine();
      break;
    }
    ++idx;
    char = stream.peek(idx);
  }
  stream.readString(idx);
}

function scanUnicode(stream, start) {
  const sPeek = stream.peek.bind(stream);
  let idx = start;
  let hexDigits = 0;
  if (sPeek(idx) === '{') {
    //\u{HexDigits}
    ++idx;
    let char = sPeek(idx);
    while (!(0, _readtable.isEOS)(char)) {
      let hex = getHexValue(char);
      if (hex === -1) break;
      hexDigits = hexDigits << 4 | hex;
      if (hexDigits > 0x10ffff) {
        throw this.createILLEGAL(char);
      }
      char = sPeek(++idx);
    }
    if (char !== '}') {
      throw this.createILLEGAL(char);
    }
    if (idx === start + 1) {
      throw this.createILLEGAL(stream.peek(idx + 1));
    }
    ++idx;
  } else {
    //\uHex4Digits
    if ((0, _readtable.isEOS)(sPeek(idx + 3))) return -1;
    let r;
    for (; idx < start + 4; ++idx) {
      r = getHexValue(sPeek(idx));
      if (r === -1) return -1;
      hexDigits = hexDigits << 4 | r;
    }
  }
  stream.readString(idx);

  return hexDigits;
}

function readStringEscape(str, stream, start, octal) {
  let idx = start + 1,
      char = stream.peek(idx),
      lineStart;
  if ((0, _readtable.isEOS)(char)) throw this.createILLEGAL(char);

  if (!isLineTerminator(char.charCodeAt(0))) {
    switch (char) {
      case 'b':
        str += '\b';
        ++idx;
        break;
      case 'f':
        str += '\f';
        ++idx;
        break;
      case 'n':
        str += '\n';
        ++idx;
        break;
      case 'r':
        str += '\r';
        ++idx;
        break;
      case 't':
        str += '\t';
        ++idx;
        break;
      case 'v':
        str += '\u000B';
        ++idx;
        break;
      case 'u':
      case 'x':
        {
          let unescaped;
          ++idx;
          let nxt = stream.peek(idx);
          if ((0, _readtable.isEOS)(nxt)) {
            throw this.createILLEGAL(nxt);
          }
          unescaped = char === 'u' ? scanUnicode.call(this, stream, idx) : scanHexEscape2.call(this, stream, idx);
          if (unescaped === -1) throw this.createILLEGAL(char);
          idx = 0; // stream is read in scanUnicode and scanHexEscape2

          str += String.fromCodePoint(unescaped);
          break;
        }
      default:
        {
          if ('0' <= char && char <= '7') {
            [str, idx, octal] = scanOctal.call(this, str, stream, char, idx, octal);
          } else if (char === '8' || char === '9') {
            throw this.createILLEGAL(char);
          } else {
            str += char;
            ++idx;
          }
        }
    }
  } else {
    if (char === '\r' && stream.peek(idx + 1) === '\n') {
      ++idx;
    }
    ++idx;
    this.incrementLine();
    lineStart = idx;
  }
  return [str, idx, octal, lineStart];
}

function scanOctal(str, stream, char, start, octal) {
  let len = 1,
      idx = start;
  if ('0' <= char && char <= '3') {
    len = 0;
  }
  let code = 0;

  while (len < 3 && '0' <= char && char <= '7') {
    ++idx;
    if (len > 0 || char !== '0') {
      if (octal == null) octal = '';
      octal += char;
    }
    code *= 8;
    code += +char; //coersion
    ++len;
    char = stream.peek(idx);
    if ((0, _readtable.isEOS)(char)) {
      throw this.createILLEGAL(char);
    }
  }
  str += String.fromCharCode(code);
  return [str, idx, octal];
}

function scanHexEscape2(stream, idx) {
  let char = stream.peek(idx);

  if ((0, _readtable.isEOS)(char)) return -1;

  let r1 = getHexValue(char);
  if (r1 === -1) return r1;

  let r2 = getHexValue(stream.peek(idx + 1));
  if (r2 === -1) return r2;

  stream.readString(idx + 1);
  return r1 << 4 | r2;
}

function insertSequence(coll, seq) {
  const char = seq[0];
  if (!coll[char]) {
    coll[char] = {};
  }
  if (seq.length === 1) {
    coll[char].isValue = true;
    return coll;
  } else {
    coll[char] = insertSequence(coll[char], seq.slice(1));
    return coll;
  }
}

const isTerminating = exports.isTerminating = table => char => table.getMapping(char).mode === 'terminating';

// check for terminating doesn't work if it's at the start
function retrieveSequenceLength(table, stream, idx) {
  const char = stream.peek(idx);
  if (!table[char]) {
    if (table.isValue) return idx;
    return -1;
  } else {
    return retrieveSequenceLength(table[char], stream, ++idx);
  }
}

const assignOps = ['=', '+=', '-=', '*=', '/=', '%=', '<<=', '>>=', '>>>=', '&=', '|=', '^=', ','];

const binaryOps = ['+', '-', '*', '/', '%', '<<', '>>', '>>>', '&', '|', '^', '&&', '||', '?', ':', '===', '==', '>=', '<=', '<', '>', '!=', '!==', 'instanceof'];

const unaryOps = ['++', '--', '~', '!', 'delete', 'void', 'typeof', 'yield', 'throw', 'new'];

const allOps = assignOps.concat(binaryOps).concat(unaryOps);

function isNonLiteralKeyword(t) {
  return (0, _tokens.isKeyword)(t) && t.value && !R.contains(t.value, literalKeywords);
}
const exprPrefixKeywords = ['instanceof', 'typeof', 'delete', 'void', 'yield', 'throw', 'new', 'case'];

function isExprReturn(l, p) {
  // ... return {x: 42} /r /i
  // ... return\n{x: 42} /r /i
  return popRestMaybe(p).map(([retKwd, rest]) => (0, _tokens.isKeyword)(retKwd, 'return') && (0, _tokens.getLineNumber)(retKwd) === l).getOrElse(false);
}

// List a -> Boolean
function isTopPunctuator(p) {
  return popMaybe(p).map(punc => (0, _tokens.isPunctuator)(punc)).getOrElse(false);
}

function isOperator(op) {
  if (((0, _tokens.isPunctuator)(op) || (0, _tokens.isKeyword)(op)) && op.value != null) {
    const opVal = op.value; // the const is because flow doesn't know op.value isn't mutated
    return allOps.some(o => o === opVal);
  }
  return false;
}

function isTopOperator(p) {
  return popMaybe(p).map(op => {
    return isOperator(op);
  }).getOrElse(false);
}

function isExprPrefixKeyword(kwd) {
  return (0, _tokens.isKeyword)(kwd, exprPrefixKeywords);
}

function isTopKeywordExprPrefix(p) {
  return popMaybe(p).map(kwd => {
    return isExprPrefixKeyword(kwd);
  }).getOrElse(false);
}

function isTopColon(p) {
  return popMaybe(p).map(colon => {
    if ((0, _tokens.isPunctuator)(colon, ':')) {
      return true;
    }
    return false;
  }).getOrElse(false);
}

function isExprPrefix(l, b, p) {
  if (p.size === 0) {
    // ... ({x: 42} /r/i)
    return b;
  } else if (isTopColon(p)) {
    // ... ({x: {x: 42} /r/i })
    return b;
  } else if (isTopKeywordExprPrefix(p)) {
    // ... throw {x: 42} /r/i
    return true;
  } else if (isTopOperator(p)) {
    // ... 42 + {x: 42} /r/i
    return true;
  } else if (isTopPunctuator(p)) {
    // ... for ( ; {x: 42}/r/i)
    return b;
  } else if (isExprReturn(l, p)) {
    // ... return {x: 42} /r /i
    // ... return\n{x: 42} /r /i
    return true;
  }
  return false;
}

function popMaybe(p) {
  if (p.size >= 1) {
    return _ramdaFantasy.Maybe.of(p.last());
  }
  return Nothing();
}

function isTopStandaloneKeyword(prefix) {
  // P . t . t'  where t \not = "." and t' ∈ (Keyword \setminus  LiteralKeyword)
  return popRestMaybe(prefix).map(([kwd, rest]) => {
    if (isNonLiteralKeyword(kwd)) {
      return _ramdaFantasy.Maybe.maybe(true, dot => !(0, _tokens.isPunctuator)(dot, '.'), popMaybe(rest));
    }
    return false;
  }).getOrElse(false);
}

function isTopParensWithKeyword(prefix) {
  // P . t . t' . (T)  where t \not = "." and t' ∈ (Keyword \setminus LiteralKeyword)
  return popRestMaybe(prefix).chain(([paren, rest]) => (0, _tokens.isParens)(paren) ? popRestMaybe(rest) : Nothing()).map(([kwd, rest]) => {
    if (isNonLiteralKeyword(kwd)) {
      return _ramdaFantasy.Maybe.maybe(true, dot => !(0, _tokens.isPunctuator)(dot, '.'), popMaybe(rest));
    }
    return false;
  }).getOrElse(false);
}

function popRestMaybe(p) {
  if (p.size > 0) {
    let last = p.last();
    let rest = p.pop();
    return _ramdaFantasy.Maybe.of([last, rest]);
  }
  return Nothing();
}

function isTopFunctionExpression(prefix, exprAllowed) {
  // P . function^l . x? . () . {}     where isExprPrefix(P, b, l) = false
  return popRestMaybe(prefix).chain(([curly, rest]) => {
    if ((0, _tokens.isBraces)(curly)) {
      return popRestMaybe(rest);
    }
    return Nothing();
  }).chain(([paren, rest]) => {
    if ((0, _tokens.isParens)(paren)) {
      return popRestMaybe(rest);
    }
    return Nothing();
  }).chain(([optIdent, rest]) => {
    if ((0, _tokens.isIdentifier)(optIdent)) {
      return popRestMaybe(rest);
    }
    return _ramdaFantasy.Maybe.of([optIdent, rest]);
  }).chain(([fnKwd, rest]) => {
    if ((0, _tokens.isKeyword)(fnKwd, 'function')) {
      let l = (0, _tokens.getLineNumber)(fnKwd);
      if (l == null) {
        throw new Error('Un-expected null line number');
      }
      return _ramdaFantasy.Maybe.of(!isExprPrefix(l, exprAllowed, rest));
    }
    return _ramdaFantasy.Maybe.of(false);
  }).getOrElse(false);
}

function isTopObjectLiteral(prefix, exprAllowed) {
  // P . {T}^l  where isExprPrefix(P, b, l) = false
  return popRestMaybe(prefix).chain(([braces, rest]) => {
    if ((0, _tokens.isBraces)(braces)) {
      let l = (0, _tokens.getLineNumber)(braces);
      if (l == null) {
        throw new Error('Un-expected null line number');
      }
      return _ramdaFantasy.Maybe.of(!isExprPrefix(l, exprAllowed, rest));
    }
    return _ramdaFantasy.Maybe.of(false);
  }).getOrElse(false);
}

function isTopFunction(prefix) {
  // P . function^l . x? . () . {}     where isExprPrefix(P, b, l) = false
  return popRestMaybe(prefix).chain(([curly, rest]) => {
    if ((0, _tokens.isBraces)(curly)) {
      return popRestMaybe(rest);
    }
    return Nothing();
  }).chain(([paren, rest]) => {
    if ((0, _tokens.isParens)(paren)) {
      return popRestMaybe(rest);
    }
    return Nothing();
  }).chain(([optIdent, rest]) => {
    if ((0, _tokens.isIdentifier)(optIdent)) {
      return popRestMaybe(rest);
    }
    return _ramdaFantasy.Maybe.of([optIdent, rest]);
  }).chain(([fnKwd, rest]) => {
    if ((0, _tokens.isKeyword)(fnKwd, 'function')) {
      return _ramdaFantasy.Maybe.of(true);
    }
    return _ramdaFantasy.Maybe.of(false);
  }).getOrElse(false);
}

function isRegexPrefix(exprAllowed, prefix) {
  if (prefix.isEmpty()) {
    // ε
    return true;
  } else if (isTopPunctuator(prefix)) {
    // P . t   where t ∈ Punctuator
    return true;
  } else if (isTopStandaloneKeyword(prefix)) {
    // P . t . t'  where t \not = "." and t' ∈ (Keyword \setminus  LiteralKeyword)
    return true;
  } else if (isTopParensWithKeyword(prefix)) {
    // P . t . t' . (T)  where t \not = "." and t' ∈ (Keyword \setminus LiteralKeyword)
    return true;
  } else if (isTopFunction(prefix)) {
    // P . function^l . x? . () . {}     where isExprPrefix(P, b, l) = false
    return isTopFunctionExpression(prefix, exprAllowed);
  } else if (isTopObjectLiteral(prefix, exprAllowed)) {
    // P . {T}^l  where isExprPrefix(P, b, l) = false
    return true;
  }
  return false;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZWFkZXIvdXRpbHMuanMiXSwibmFtZXMiOlsiZ2V0SGV4VmFsdWUiLCJza2lwU2luZ2xlTGluZUNvbW1lbnQiLCJzY2FuVW5pY29kZSIsInJlYWRTdHJpbmdFc2NhcGUiLCJpbnNlcnRTZXF1ZW5jZSIsInJldHJpZXZlU2VxdWVuY2VMZW5ndGgiLCJpc0V4cHJQcmVmaXgiLCJpc1JlZ2V4UHJlZml4IiwiUiIsImlzTGluZVRlcm1pbmF0b3IiLCJpc1doaXRlU3BhY2UiLCJpc0RlY2ltYWxEaWdpdCIsImlzSWRlbnRpZmllclBhcnRFUzYiLCJpc0lkZW50aWZpZXJQYXJ0IiwiaXNJZGVudGlmaWVyU3RhcnRFUzYiLCJpc0lkZW50aWZpZXJTdGFydCIsIk5vdGhpbmciLCJsaXRlcmFsS2V5d29yZHMiLCJydW5lIiwiY2hhckNvZGVBdCIsInN0cmVhbSIsImlkeCIsImNoYXIiLCJwZWVrIiwiY2hDb2RlIiwiaW5jcmVtZW50TGluZSIsInJlYWRTdHJpbmciLCJzdGFydCIsInNQZWVrIiwiYmluZCIsImhleERpZ2l0cyIsImhleCIsImNyZWF0ZUlMTEVHQUwiLCJyIiwic3RyIiwib2N0YWwiLCJsaW5lU3RhcnQiLCJ1bmVzY2FwZWQiLCJueHQiLCJjYWxsIiwic2NhbkhleEVzY2FwZTIiLCJTdHJpbmciLCJmcm9tQ29kZVBvaW50Iiwic2Nhbk9jdGFsIiwibGVuIiwiY29kZSIsImZyb21DaGFyQ29kZSIsInIxIiwicjIiLCJjb2xsIiwic2VxIiwibGVuZ3RoIiwiaXNWYWx1ZSIsInNsaWNlIiwiaXNUZXJtaW5hdGluZyIsInRhYmxlIiwiZ2V0TWFwcGluZyIsIm1vZGUiLCJhc3NpZ25PcHMiLCJiaW5hcnlPcHMiLCJ1bmFyeU9wcyIsImFsbE9wcyIsImNvbmNhdCIsImlzTm9uTGl0ZXJhbEtleXdvcmQiLCJ0IiwidmFsdWUiLCJjb250YWlucyIsImV4cHJQcmVmaXhLZXl3b3JkcyIsImlzRXhwclJldHVybiIsImwiLCJwIiwicG9wUmVzdE1heWJlIiwibWFwIiwicmV0S3dkIiwicmVzdCIsImdldE9yRWxzZSIsImlzVG9wUHVuY3R1YXRvciIsInBvcE1heWJlIiwicHVuYyIsImlzT3BlcmF0b3IiLCJvcCIsIm9wVmFsIiwic29tZSIsIm8iLCJpc1RvcE9wZXJhdG9yIiwiaXNFeHByUHJlZml4S2V5d29yZCIsImt3ZCIsImlzVG9wS2V5d29yZEV4cHJQcmVmaXgiLCJpc1RvcENvbG9uIiwiY29sb24iLCJiIiwic2l6ZSIsIm9mIiwibGFzdCIsImlzVG9wU3RhbmRhbG9uZUtleXdvcmQiLCJwcmVmaXgiLCJtYXliZSIsImRvdCIsImlzVG9wUGFyZW5zV2l0aEtleXdvcmQiLCJjaGFpbiIsInBhcmVuIiwicG9wIiwiaXNUb3BGdW5jdGlvbkV4cHJlc3Npb24iLCJleHByQWxsb3dlZCIsImN1cmx5Iiwib3B0SWRlbnQiLCJmbkt3ZCIsIkVycm9yIiwiaXNUb3BPYmplY3RMaXRlcmFsIiwiYnJhY2VzIiwiaXNUb3BGdW5jdGlvbiIsImlzRW1wdHkiXSwibWFwcGluZ3MiOiI7Ozs7OztRQXlDZ0JBLFcsR0FBQUEsVztRQWFBQyxxQixHQUFBQSxxQjtRQW1CQUMsVyxHQUFBQSxXO1FBdUNBQyxnQixHQUFBQSxnQjtRQTZIQUMsYyxHQUFBQSxjO1FBa0JBQyxzQixHQUFBQSxzQjtRQTZJQUMsWSxHQUFBQSxZO1FBOEpBQyxhLEdBQUFBLGE7O0FBeGlCaEI7O0FBQ0E7O0FBSUE7O0FBRUE7O0FBaUJBOztJQUFZQyxDOztBQUNaOzs7O0FBVEEsTUFBTTtBQUNKQyxrQkFESTtBQUVKQyxjQUZJO0FBR0pDLGdCQUhJO0FBSUpDLHVCQUFxQkMsZ0JBSmpCO0FBS0pDLHdCQUFzQkM7QUFMbEIsaUJBQU47O0FBVUEsTUFBTUMsVUFBVSxvQkFBTUEsT0FBdEI7O0FBRUE7QUFDQSxNQUFNQyxrQkFBa0IsQ0FBQyxNQUFELEVBQVMsTUFBVCxFQUFpQixNQUFqQixFQUF5QixPQUF6QixDQUF4Qjs7UUFHRVIsZ0IsR0FBQUEsZ0I7UUFDQUMsWSxHQUFBQSxZO1FBQ0FD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QUFoQixDQUFKLEVBQTZCO0FBQ2xDO0FBQ0EsV0FBTyxJQUFQO0FBQ0QsR0FITSxNQUdBLElBQUlELHVCQUF1QkMsTUFBdkIsQ0FBSixFQUFvQztBQUN6QztBQUNBLFdBQU8sSUFBUDtBQUNELEdBSE0sTUFHQSxJQUFJRyx1QkFBdUJILE1BQXZCLENBQUosRUFBb0M7QUFDekM7QUFDQSxXQUFPLElBQVA7QUFDRCxHQUhNLE1BR0EsSUFBSWUsY0FBY2YsTUFBZCxDQUFKLEVBQTJCO0FBQ2hDO0FBQ0EsV0FBT08sd0JBQXdCUCxNQUF4QixFQUFnQ1EsV0FBaEMsQ0FBUDtBQUNELEdBSE0sTUFHQSxJQUFJSyxtQkFBbUJiLE1BQW5CLEVBQTJCUSxXQUEzQixDQUFKLEVBQTZDO0FBQ2xEO0FBQ0EsV0FBTyxJQUFQO0FBQ0Q7QUFDRCxTQUFPLEtBQVA7QUFDRCIsImZpbGUiOiJ1dGlscy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbmltcG9ydCB7IGlzRU9TIH0gZnJvbSAncmVhZHRhYmxlJztcbmltcG9ydCB7IExpc3QgfSBmcm9tICdpbW11dGFibGUnO1xuXG5pbXBvcnQgdHlwZSB7IFJlYWR0YWJsZSwgQ2hhclN0cmVhbSB9IGZyb20gJ3JlYWR0YWJsZSc7XG5cbmltcG9ydCB7IGNvZGUgfSBmcm9tICdlc3V0aWxzJztcbmltcG9ydCB0eXBlIHsgVG9rZW5UcmVlIH0gZnJvbSAnLi4vdG9rZW5zJztcbmltcG9ydCB7XG4gIGdldExpbmVOdW1iZXIsXG4gIGlzUHVuY3R1YXRvcixcbiAgaXNLZXl3b3JkLFxuICBpc0JyYWNlcyxcbiAgaXNQYXJlbnMsXG4gIGlzSWRlbnRpZmllcixcbn0gZnJvbSAnLi4vdG9rZW5zJztcblxuY29uc3Qge1xuICBpc0xpbmVUZXJtaW5hdG9yLFxuICBpc1doaXRlU3BhY2UsXG4gIGlzRGVjaW1hbERpZ2l0LFxuICBpc0lkZW50aWZpZXJQYXJ0RVM2OiBpc0lkZW50aWZpZXJQYXJ0LFxuICBpc0lkZW50aWZpZXJTdGFydEVTNjogaXNJZGVudGlmaWVyU3RhcnQsXG59ID0gY29kZTtcblxuaW1wb3J0ICogYXMgUiBmcm9tICdyYW1kYSc7XG5pbXBvcnQgeyBNYXliZSB9IGZyb20gJ3JhbWRhLWZhbnRhc3knO1xuY29uc3QgTm90aGluZyA9IE1heWJlLk5vdGhpbmc7XG5cbi8vIFRPRE86IGFsc28sIG5lZWQgdG8gaGFuZGxlIGNvbnRleHR1YWwgeWllbGRcbmNvbnN0IGxpdGVyYWxLZXl3b3JkcyA9IFsndGhpcycsICdudWxsJywgJ3RydWUnLCAnZmFsc2UnXTtcblxuZXhwb3J0IHtcbiAgaXNMaW5lVGVybWluYXRvcixcbiAgaXNXaGl0ZVNwYWNlLFxuICBpc0RlY2ltYWxEaWdpdCxcbiAgaXNJZGVudGlmaWVyU3RhcnQsXG4gIGlzSWRlbnRpZmllclBhcnQsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0SGV4VmFsdWUocnVuZTogc3RyaW5nKSB7XG4gIGlmICgnMCcgPD0gcnVuZSAmJiBydW5lIDw9ICc5Jykge1xuICAgIHJldHVybiBydW5lLmNoYXJDb2RlQXQoMCkgLSA0ODtcbiAgfVxuICBpZiAoJ2EnIDw9IHJ1bmUgJiYgcnVuZSA8PSAnZicpIHtcbiAgICByZXR1cm4gcnVuZS5jaGFyQ29kZUF0KDApIC0gODc7XG4gIH1cbiAgaWYgKCdBJyA8PSBydW5lICYmIHJ1bmUgPD0gJ0YnKSB7XG4gICAgcmV0dXJuIHJ1bmUuY2hhckNvZGVBdCgwKSAtIDU1O1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNraXBTaW5nbGVMaW5lQ29tbWVudChzdHJlYW06IENoYXJTdHJlYW0pOiB2b2lkIHtcbiAgbGV0IGlkeCA9IDA7XG4gIGxldCBjaGFyID0gc3RyZWFtLnBlZWsoaWR4KTtcbiAgd2hpbGUgKCFpc0VPUyhjaGFyKSkge1xuICAgIGxldCBjaENvZGUgPSBjaGFyLmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGlzTGluZVRlcm1pbmF0b3IoY2hDb2RlKSkge1xuICAgICAgKytpZHg7XG4gICAgICBpZiAoY2hDb2RlID09PSAweGQgLyogXCJcXHJcIiAqLyAmJiBzdHJlYW0ucGVlayhpZHgpLmNoYXJDb2RlQXQoMCkgPT09IDB4YSkge1xuICAgICAgICAvKlwiXFxuXCIgKi8gKytpZHg7XG4gICAgICB9XG4gICAgICB0aGlzLmluY3JlbWVudExpbmUoKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICArK2lkeDtcbiAgICBjaGFyID0gc3RyZWFtLnBlZWsoaWR4KTtcbiAgfVxuICBzdHJlYW0ucmVhZFN0cmluZyhpZHgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2NhblVuaWNvZGUoc3RyZWFtOiBDaGFyU3RyZWFtLCBzdGFydDogbnVtYmVyKSB7XG4gIGNvbnN0IHNQZWVrID0gc3RyZWFtLnBlZWsuYmluZChzdHJlYW0pO1xuICBsZXQgaWR4ID0gc3RhcnQ7XG4gIGxldCBoZXhEaWdpdHMgPSAwO1xuICBpZiAoc1BlZWsoaWR4KSA9PT0gJ3snKSB7XG4gICAgLy9cXHV7SGV4RGlnaXRzfVxuICAgICsraWR4O1xuICAgIGxldCBjaGFyID0gc1BlZWsoaWR4KTtcbiAgICB3aGlsZSAoIWlzRU9TKGNoYXIpKSB7XG4gICAgICBsZXQgaGV4ID0gZ2V0SGV4VmFsdWUoY2hhcik7XG4gICAgICBpZiAoaGV4ID09PSAtMSkgYnJlYWs7XG4gICAgICBoZXhEaWdpdHMgPSAoaGV4RGlnaXRzIDw8IDQpIHwgaGV4O1xuICAgICAgaWYgKGhleERpZ2l0cyA+IDB4MTBmZmZmKSB7XG4gICAgICAgIHRocm93IHRoaXMuY3JlYXRlSUxMRUdBTChjaGFyKTtcbiAgICAgIH1cbiAgICAgIGNoYXIgPSBzUGVlaygrK2lkeCk7XG4gICAgfVxuICAgIGlmIChjaGFyICE9PSAnfScpIHtcbiAgICAgIHRocm93IHRoaXMuY3JlYXRlSUxMRUdBTChjaGFyKTtcbiAgICB9XG4gICAgaWYgKGlkeCA9PT0gc3RhcnQgKyAxKSB7XG4gICAgICB0aHJvdyB0aGlzLmNyZWF0ZUlMTEVHQUwoc3RyZWFtLnBlZWsoaWR4ICsgMSkpO1xuICAgIH1cbiAgICArK2lkeDtcbiAgfSBlbHNlIHtcbiAgICAvL1xcdUhleDREaWdpdHNcbiAgICBpZiAoaXNFT1Moc1BlZWsoaWR4ICsgMykpKSByZXR1cm4gLTE7XG4gICAgbGV0IHI7XG4gICAgZm9yICg7IGlkeCA8IHN0YXJ0ICsgNDsgKytpZHgpIHtcbiAgICAgIHIgPSBnZXRIZXhWYWx1ZShzUGVlayhpZHgpKTtcbiAgICAgIGlmIChyID09PSAtMSkgcmV0dXJuIC0xO1xuICAgICAgaGV4RGlnaXRzID0gKGhleERpZ2l0cyA8PCA0KSB8IHI7XG4gICAgfVxuICB9XG4gIHN0cmVhbS5yZWFkU3RyaW5nKGlkeCk7XG5cbiAgcmV0dXJuIGhleERpZ2l0cztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRTdHJpbmdFc2NhcGUoXG4gIHN0cjogc3RyaW5nLFxuICBzdHJlYW06IENoYXJTdHJlYW0sXG4gIHN0YXJ0OiBudW1iZXIsXG4gIG9jdGFsOiA/c3RyaW5nLFxuKSB7XG4gIGxldCBpZHggPSBzdGFydCArIDEsXG4gICAgY2hhciA9IHN0cmVhbS5wZWVrKGlkeCksXG4gICAgbGluZVN0YXJ0O1xuICBpZiAoaXNFT1MoY2hhcikpIHRocm93IHRoaXMuY3JlYXRlSUxMRUdBTChjaGFyKTtcblxuICBpZiAoIWlzTGluZVRlcm1pbmF0b3IoY2hhci5jaGFyQ29kZUF0KDApKSkge1xuICAgIHN3aXRjaCAoY2hhcikge1xuICAgICAgY2FzZSAnYic6XG4gICAgICAgIHN0ciArPSAnXFxiJztcbiAgICAgICAgKytpZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZic6XG4gICAgICAgIHN0ciArPSAnXFxmJztcbiAgICAgICAgKytpZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbic6XG4gICAgICAgIHN0ciArPSAnXFxuJztcbiAgICAgICAgKytpZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncic6XG4gICAgICAgIHN0ciArPSAnXFxyJztcbiAgICAgICAgKytpZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndCc6XG4gICAgICAgIHN0ciArPSAnXFx0JztcbiAgICAgICAgKytpZHg7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndic6XG4gICAgICAgIHN0ciArPSAnXFx1MDAwQic7XG4gICAgICAgICsraWR4O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3UnOlxuICAgICAgY2FzZSAneCc6IHtcbiAgICAgICAgbGV0IHVuZXNjYXBlZDtcbiAgICAgICAgKytpZHg7XG4gICAgICAgIGxldCBueHQgPSBzdHJlYW0ucGVlayhpZHgpO1xuICAgICAgICBpZiAoaXNFT1Mobnh0KSkge1xuICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlSUxMRUdBTChueHQpO1xuICAgICAgICB9XG4gICAgICAgIHVuZXNjYXBlZCA9XG4gICAgICAgICAgY2hhciA9PT0gJ3UnXG4gICAgICAgICAgICA/IHNjYW5Vbmljb2RlLmNhbGwodGhpcywgc3RyZWFtLCBpZHgpXG4gICAgICAgICAgICA6IHNjYW5IZXhFc2NhcGUyLmNhbGwodGhpcywgc3RyZWFtLCBpZHgpO1xuICAgICAgICBpZiAodW5lc2NhcGVkID09PSAtMSkgdGhyb3cgdGhpcy5jcmVhdGVJTExFR0FMKGNoYXIpO1xuICAgICAgICBpZHggPSAwOyAvLyBzdHJlYW0gaXMgcmVhZCBpbiBzY2FuVW5pY29kZSBhbmQgc2NhbkhleEVzY2FwZTJcblxuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21Db2RlUG9pbnQodW5lc2NhcGVkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGlmICgnMCcgPD0gY2hhciAmJiBjaGFyIDw9ICc3Jykge1xuICAgICAgICAgIFtzdHIsIGlkeCwgb2N0YWxdID0gc2Nhbk9jdGFsLmNhbGwoXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgc3RyLFxuICAgICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgICAgY2hhcixcbiAgICAgICAgICAgIGlkeCxcbiAgICAgICAgICAgIG9jdGFsLFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gJzgnIHx8IGNoYXIgPT09ICc5Jykge1xuICAgICAgICAgIHRocm93IHRoaXMuY3JlYXRlSUxMRUdBTChjaGFyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdHIgKz0gY2hhcjtcbiAgICAgICAgICArK2lkeDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoY2hhciA9PT0gJ1xccicgJiYgc3RyZWFtLnBlZWsoaWR4ICsgMSkgPT09ICdcXG4nKSB7XG4gICAgICArK2lkeDtcbiAgICB9XG4gICAgKytpZHg7XG4gICAgdGhpcy5pbmNyZW1lbnRMaW5lKCk7XG4gICAgbGluZVN0YXJ0ID0gaWR4O1xuICB9XG4gIHJldHVybiBbc3RyLCBpZHgsIG9jdGFsLCBsaW5lU3RhcnRdO1xufVxuXG5mdW5jdGlvbiBzY2FuT2N0YWwoc3RyLCBzdHJlYW0sIGNoYXIsIHN0YXJ0LCBvY3RhbCkge1xuICBsZXQgbGVuID0gMSxcbiAgICBpZHggPSBzdGFydDtcbiAgaWYgKCcwJyA8PSBjaGFyICYmIGNoYXIgPD0gJzMnKSB7XG4gICAgbGVuID0gMDtcbiAgfVxuICBsZXQgY29kZSA9IDA7XG5cbiAgd2hpbGUgKGxlbiA8IDMgJiYgJzAnIDw9IGNoYXIgJiYgY2hhciA8PSAnNycpIHtcbiAgICArK2lkeDtcbiAgICBpZiAobGVuID4gMCB8fCBjaGFyICE9PSAnMCcpIHtcbiAgICAgIGlmIChvY3RhbCA9PSBudWxsKSBvY3RhbCA9ICcnO1xuICAgICAgb2N0YWwgKz0gY2hhcjtcbiAgICB9XG4gICAgY29kZSAqPSA4O1xuICAgIGNvZGUgKz0gK2NoYXI7IC8vY29lcnNpb25cbiAgICArK2xlbjtcbiAgICBjaGFyID0gc3RyZWFtLnBlZWsoaWR4KTtcbiAgICBpZiAoaXNFT1MoY2hhcikpIHtcbiAgICAgIHRocm93IHRoaXMuY3JlYXRlSUxMRUdBTChjaGFyKTtcbiAgICB9XG4gIH1cbiAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY29kZSk7XG4gIHJldHVybiBbc3RyLCBpZHgsIG9jdGFsXTtcbn1cblxuZnVuY3Rpb24gc2NhbkhleEVzY2FwZTIoc3RyZWFtLCBpZHgpIHtcbiAgbGV0IGNoYXIgPSBzdHJlYW0ucGVlayhpZHgpO1xuXG4gIGlmIChpc0VPUyhjaGFyKSkgcmV0dXJuIC0xO1xuXG4gIGxldCByMSA9IGdldEhleFZhbHVlKGNoYXIpO1xuICBpZiAocjEgPT09IC0xKSByZXR1cm4gcjE7XG5cbiAgbGV0IHIyID0gZ2V0SGV4VmFsdWUoc3RyZWFtLnBlZWsoaWR4ICsgMSkpO1xuICBpZiAocjIgPT09IC0xKSByZXR1cm4gcjI7XG5cbiAgc3RyZWFtLnJlYWRTdHJpbmcoaWR4ICsgMSk7XG4gIHJldHVybiAocjEgPDwgNCkgfCByMjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluc2VydFNlcXVlbmNlKGNvbGw6IE9iamVjdCwgc2VxOiBzdHJpbmcpIHtcbiAgY29uc3QgY2hhciA9IHNlcVswXTtcbiAgaWYgKCFjb2xsW2NoYXJdKSB7XG4gICAgY29sbFtjaGFyXSA9IHt9O1xuICB9XG4gIGlmIChzZXEubGVuZ3RoID09PSAxKSB7XG4gICAgY29sbFtjaGFyXS5pc1ZhbHVlID0gdHJ1ZTtcbiAgICByZXR1cm4gY29sbDtcbiAgfSBlbHNlIHtcbiAgICBjb2xsW2NoYXJdID0gaW5zZXJ0U2VxdWVuY2UoY29sbFtjaGFyXSwgc2VxLnNsaWNlKDEpKTtcbiAgICByZXR1cm4gY29sbDtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaXNUZXJtaW5hdGluZyA9ICh0YWJsZTogUmVhZHRhYmxlKSA9PiAoY2hhcjogc3RyaW5nKTogYm9vbGVhbiA9PlxuICB0YWJsZS5nZXRNYXBwaW5nKGNoYXIpLm1vZGUgPT09ICd0ZXJtaW5hdGluZyc7XG5cbi8vIGNoZWNrIGZvciB0ZXJtaW5hdGluZyBkb2Vzbid0IHdvcmsgaWYgaXQncyBhdCB0aGUgc3RhcnRcbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZVNlcXVlbmNlTGVuZ3RoKFxuICB0YWJsZTogT2JqZWN0LFxuICBzdHJlYW06IENoYXJTdHJlYW0sXG4gIGlkeDogbnVtYmVyLFxuKTogbnVtYmVyIHtcbiAgY29uc3QgY2hhciA9IHN0cmVhbS5wZWVrKGlkeCk7XG4gIGlmICghdGFibGVbY2hhcl0pIHtcbiAgICBpZiAodGFibGUuaXNWYWx1ZSkgcmV0dXJuIGlkeDtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJldHJpZXZlU2VxdWVuY2VMZW5ndGgodGFibGVbY2hhcl0sIHN0cmVhbSwgKytpZHgpO1xuICB9XG59XG5cbmNvbnN0IGFzc2lnbk9wcyA9IFtcbiAgJz0nLFxuICAnKz0nLFxuICAnLT0nLFxuICAnKj0nLFxuICAnLz0nLFxuICAnJT0nLFxuICAnPDw9JyxcbiAgJz4+PScsXG4gICc+Pj49JyxcbiAgJyY9JyxcbiAgJ3w9JyxcbiAgJ149JyxcbiAgJywnLFxuXTtcblxuY29uc3QgYmluYXJ5T3BzID0gW1xuICAnKycsXG4gICctJyxcbiAgJyonLFxuICAnLycsXG4gICclJyxcbiAgJzw8JyxcbiAgJz4+JyxcbiAgJz4+PicsXG4gICcmJyxcbiAgJ3wnLFxuICAnXicsXG4gICcmJicsXG4gICd8fCcsXG4gICc/JyxcbiAgJzonLFxuICAnPT09JyxcbiAgJz09JyxcbiAgJz49JyxcbiAgJzw9JyxcbiAgJzwnLFxuICAnPicsXG4gICchPScsXG4gICchPT0nLFxuICAnaW5zdGFuY2VvZicsXG5dO1xuXG5jb25zdCB1bmFyeU9wcyA9IFtcbiAgJysrJyxcbiAgJy0tJyxcbiAgJ34nLFxuICAnIScsXG4gICdkZWxldGUnLFxuICAndm9pZCcsXG4gICd0eXBlb2YnLFxuICAneWllbGQnLFxuICAndGhyb3cnLFxuICAnbmV3Jyxcbl07XG5cbmNvbnN0IGFsbE9wcyA9IGFzc2lnbk9wcy5jb25jYXQoYmluYXJ5T3BzKS5jb25jYXQodW5hcnlPcHMpO1xuXG5mdW5jdGlvbiBpc05vbkxpdGVyYWxLZXl3b3JkKHQ6IFRva2VuVHJlZSkge1xuICByZXR1cm4gaXNLZXl3b3JkKHQpICYmIHQudmFsdWUgJiYgIVIuY29udGFpbnModC52YWx1ZSwgbGl0ZXJhbEtleXdvcmRzKTtcbn1cbmNvbnN0IGV4cHJQcmVmaXhLZXl3b3JkcyA9IFtcbiAgJ2luc3RhbmNlb2YnLFxuICAndHlwZW9mJyxcbiAgJ2RlbGV0ZScsXG4gICd2b2lkJyxcbiAgJ3lpZWxkJyxcbiAgJ3Rocm93JyxcbiAgJ25ldycsXG4gICdjYXNlJyxcbl07XG5cbmZ1bmN0aW9uIGlzRXhwclJldHVybihsOiBudW1iZXIsIHA6IExpc3Q8VG9rZW5UcmVlPikge1xuICAvLyAuLi4gcmV0dXJuIHt4OiA0Mn0gL3IgL2lcbiAgLy8gLi4uIHJldHVyblxcbnt4OiA0Mn0gL3IgL2lcbiAgcmV0dXJuIHBvcFJlc3RNYXliZShwKVxuICAgIC5tYXAoXG4gICAgICAoW3JldEt3ZCwgcmVzdF0pID0+XG4gICAgICAgIGlzS2V5d29yZChyZXRLd2QsICdyZXR1cm4nKSAmJiBnZXRMaW5lTnVtYmVyKHJldEt3ZCkgPT09IGwsXG4gICAgKVxuICAgIC5nZXRPckVsc2UoZmFsc2UpO1xufVxuXG4vLyBMaXN0IGEgLT4gQm9vbGVhblxuZnVuY3Rpb24gaXNUb3BQdW5jdHVhdG9yKHA6IExpc3Q8VG9rZW5UcmVlPikge1xuICByZXR1cm4gcG9wTWF5YmUocCkubWFwKHB1bmMgPT4gaXNQdW5jdHVhdG9yKHB1bmMpKS5nZXRPckVsc2UoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBpc09wZXJhdG9yKG9wOiBUb2tlblRyZWUpIHtcbiAgaWYgKChpc1B1bmN0dWF0b3Iob3ApIHx8IGlzS2V5d29yZChvcCkpICYmIG9wLnZhbHVlICE9IG51bGwpIHtcbiAgICBjb25zdCBvcFZhbCA9IG9wLnZhbHVlOyAvLyB0aGUgY29uc3QgaXMgYmVjYXVzZSBmbG93IGRvZXNuJ3Qga25vdyBvcC52YWx1ZSBpc24ndCBtdXRhdGVkXG4gICAgcmV0dXJuIGFsbE9wcy5zb21lKG8gPT4gbyA9PT0gb3BWYWwpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaXNUb3BPcGVyYXRvcihwOiBMaXN0PFRva2VuVHJlZT4pIHtcbiAgcmV0dXJuIHBvcE1heWJlKHApXG4gICAgLm1hcChvcCA9PiB7XG4gICAgICByZXR1cm4gaXNPcGVyYXRvcihvcCk7XG4gICAgfSlcbiAgICAuZ2V0T3JFbHNlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gaXNFeHByUHJlZml4S2V5d29yZChrd2Q6IFRva2VuVHJlZSkge1xuICByZXR1cm4gaXNLZXl3b3JkKGt3ZCwgZXhwclByZWZpeEtleXdvcmRzKTtcbn1cblxuZnVuY3Rpb24gaXNUb3BLZXl3b3JkRXhwclByZWZpeChwOiBMaXN0PFRva2VuVHJlZT4pIHtcbiAgcmV0dXJuIHBvcE1heWJlKHApXG4gICAgLm1hcChrd2QgPT4ge1xuICAgICAgcmV0dXJuIGlzRXhwclByZWZpeEtleXdvcmQoa3dkKTtcbiAgICB9KVxuICAgIC5nZXRPckVsc2UoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBpc1RvcENvbG9uKHA6IExpc3Q8VG9rZW5UcmVlPikge1xuICByZXR1cm4gcG9wTWF5YmUocClcbiAgICAubWFwKGNvbG9uID0+IHtcbiAgICAgIGlmIChpc1B1bmN0dWF0b3IoY29sb24sICc6JykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSlcbiAgICAuZ2V0T3JFbHNlKGZhbHNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXhwclByZWZpeChsOiBudW1iZXIsIGI6IGJvb2xlYW4sIHA6IExpc3Q8VG9rZW5UcmVlPikge1xuICBpZiAocC5zaXplID09PSAwKSB7XG4gICAgLy8gLi4uICh7eDogNDJ9IC9yL2kpXG4gICAgcmV0dXJuIGI7XG4gIH0gZWxzZSBpZiAoaXNUb3BDb2xvbihwKSkge1xuICAgIC8vIC4uLiAoe3g6IHt4OiA0Mn0gL3IvaSB9KVxuICAgIHJldHVybiBiO1xuICB9IGVsc2UgaWYgKGlzVG9wS2V5d29yZEV4cHJQcmVmaXgocCkpIHtcbiAgICAvLyAuLi4gdGhyb3cge3g6IDQyfSAvci9pXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNUb3BPcGVyYXRvcihwKSkge1xuICAgIC8vIC4uLiA0MiArIHt4OiA0Mn0gL3IvaVxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzVG9wUHVuY3R1YXRvcihwKSkge1xuICAgIC8vIC4uLiBmb3IgKCA7IHt4OiA0Mn0vci9pKVxuICAgIHJldHVybiBiO1xuICB9IGVsc2UgaWYgKGlzRXhwclJldHVybihsLCBwKSkge1xuICAgIC8vIC4uLiByZXR1cm4ge3g6IDQyfSAvciAvaVxuICAgIC8vIC4uLiByZXR1cm5cXG57eDogNDJ9IC9yIC9pXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBwb3BNYXliZTxUPihwOiBMaXN0PFQ+KTogTWF5YmU8VD4ge1xuICBpZiAocC5zaXplID49IDEpIHtcbiAgICByZXR1cm4gTWF5YmUub2YocC5sYXN0KCkpO1xuICB9XG4gIHJldHVybiBOb3RoaW5nKCk7XG59XG5cbmZ1bmN0aW9uIGlzVG9wU3RhbmRhbG9uZUtleXdvcmQocHJlZml4OiBMaXN0PFRva2VuVHJlZT4pIHtcbiAgLy8gUCAuIHQgLiB0JyAgd2hlcmUgdCBcXG5vdCA9IFwiLlwiIGFuZCB0JyDiiIggKEtleXdvcmQgXFxzZXRtaW51cyAgTGl0ZXJhbEtleXdvcmQpXG4gIHJldHVybiBwb3BSZXN0TWF5YmUocHJlZml4KVxuICAgIC5tYXAoKFtrd2QsIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNOb25MaXRlcmFsS2V5d29yZChrd2QpKSB7XG4gICAgICAgIHJldHVybiBNYXliZS5tYXliZShcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIGRvdCA9PiAhaXNQdW5jdHVhdG9yKGRvdCwgJy4nKSxcbiAgICAgICAgICBwb3BNYXliZShyZXN0KSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KVxuICAgIC5nZXRPckVsc2UoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBpc1RvcFBhcmVuc1dpdGhLZXl3b3JkKHByZWZpeDogTGlzdDxUb2tlblRyZWU+KSB7XG4gIC8vIFAgLiB0IC4gdCcgLiAoVCkgIHdoZXJlIHQgXFxub3QgPSBcIi5cIiBhbmQgdCcg4oiIIChLZXl3b3JkIFxcc2V0bWludXMgTGl0ZXJhbEtleXdvcmQpXG4gIHJldHVybiBwb3BSZXN0TWF5YmUocHJlZml4KVxuICAgIC5jaGFpbihcbiAgICAgIChbcGFyZW4sIHJlc3RdKSA9PiAoaXNQYXJlbnMocGFyZW4pID8gcG9wUmVzdE1heWJlKHJlc3QpIDogTm90aGluZygpKSxcbiAgICApXG4gICAgLm1hcCgoW2t3ZCwgcmVzdF0pID0+IHtcbiAgICAgIGlmIChpc05vbkxpdGVyYWxLZXl3b3JkKGt3ZCkpIHtcbiAgICAgICAgcmV0dXJuIE1heWJlLm1heWJlKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgZG90ID0+ICFpc1B1bmN0dWF0b3IoZG90LCAnLicpLFxuICAgICAgICAgIHBvcE1heWJlKHJlc3QpLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pXG4gICAgLmdldE9yRWxzZShmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIHBvcFJlc3RNYXliZShwOiBMaXN0PFRva2VuVHJlZT4pOiBNYXliZTxbVG9rZW5UcmVlLCBMaXN0PFRva2VuVHJlZT5dPiB7XG4gIGlmIChwLnNpemUgPiAwKSB7XG4gICAgbGV0IGxhc3QgPSBwLmxhc3QoKTtcbiAgICBsZXQgcmVzdCA9IHAucG9wKCk7XG4gICAgcmV0dXJuIE1heWJlLm9mKFtsYXN0LCByZXN0XSk7XG4gIH1cbiAgcmV0dXJuIE5vdGhpbmcoKTtcbn1cblxuZnVuY3Rpb24gaXNUb3BGdW5jdGlvbkV4cHJlc3Npb24oXG4gIHByZWZpeDogTGlzdDxUb2tlblRyZWU+LFxuICBleHByQWxsb3dlZDogYm9vbGVhbixcbikge1xuICAvLyBQIC4gZnVuY3Rpb25ebCAuIHg/IC4gKCkgLiB7fSAgICAgd2hlcmUgaXNFeHByUHJlZml4KFAsIGIsIGwpID0gZmFsc2VcbiAgcmV0dXJuIHBvcFJlc3RNYXliZShwcmVmaXgpXG4gICAgLmNoYWluKChbY3VybHksIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNCcmFjZXMoY3VybHkpKSB7XG4gICAgICAgIHJldHVybiBwb3BSZXN0TWF5YmUocmVzdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTm90aGluZygpO1xuICAgIH0pXG4gICAgLmNoYWluKChbcGFyZW4sIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNQYXJlbnMocGFyZW4pKSB7XG4gICAgICAgIHJldHVybiBwb3BSZXN0TWF5YmUocmVzdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTm90aGluZygpO1xuICAgIH0pXG4gICAgLmNoYWluKChbb3B0SWRlbnQsIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNJZGVudGlmaWVyKG9wdElkZW50KSkge1xuICAgICAgICByZXR1cm4gcG9wUmVzdE1heWJlKHJlc3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE1heWJlLm9mKFtvcHRJZGVudCwgcmVzdF0pO1xuICAgIH0pXG4gICAgLmNoYWluKChbZm5Ld2QsIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNLZXl3b3JkKGZuS3dkLCAnZnVuY3Rpb24nKSkge1xuICAgICAgICBsZXQgbCA9IGdldExpbmVOdW1iZXIoZm5Ld2QpO1xuICAgICAgICBpZiAobCA9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbi1leHBlY3RlZCBudWxsIGxpbmUgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1heWJlLm9mKCFpc0V4cHJQcmVmaXgobCwgZXhwckFsbG93ZWQsIHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBNYXliZS5vZihmYWxzZSk7XG4gICAgfSlcbiAgICAuZ2V0T3JFbHNlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gaXNUb3BPYmplY3RMaXRlcmFsKHByZWZpeDogTGlzdDxUb2tlblRyZWU+LCBleHByQWxsb3dlZDogYm9vbGVhbikge1xuICAvLyBQIC4ge1R9XmwgIHdoZXJlIGlzRXhwclByZWZpeChQLCBiLCBsKSA9IGZhbHNlXG4gIHJldHVybiBwb3BSZXN0TWF5YmUocHJlZml4KVxuICAgIC5jaGFpbigoW2JyYWNlcywgcmVzdF0pID0+IHtcbiAgICAgIGlmIChpc0JyYWNlcyhicmFjZXMpKSB7XG4gICAgICAgIGxldCBsID0gZ2V0TGluZU51bWJlcihicmFjZXMpO1xuICAgICAgICBpZiAobCA9PSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbi1leHBlY3RlZCBudWxsIGxpbmUgbnVtYmVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1heWJlLm9mKCFpc0V4cHJQcmVmaXgobCwgZXhwckFsbG93ZWQsIHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBNYXliZS5vZihmYWxzZSk7XG4gICAgfSlcbiAgICAuZ2V0T3JFbHNlKGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gaXNUb3BGdW5jdGlvbihwcmVmaXg6IExpc3Q8VG9rZW5UcmVlPikge1xuICAvLyBQIC4gZnVuY3Rpb25ebCAuIHg/IC4gKCkgLiB7fSAgICAgd2hlcmUgaXNFeHByUHJlZml4KFAsIGIsIGwpID0gZmFsc2VcbiAgcmV0dXJuIHBvcFJlc3RNYXliZShwcmVmaXgpXG4gICAgLmNoYWluKChbY3VybHksIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNCcmFjZXMoY3VybHkpKSB7XG4gICAgICAgIHJldHVybiBwb3BSZXN0TWF5YmUocmVzdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTm90aGluZygpO1xuICAgIH0pXG4gICAgLmNoYWluKChbcGFyZW4sIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNQYXJlbnMocGFyZW4pKSB7XG4gICAgICAgIHJldHVybiBwb3BSZXN0TWF5YmUocmVzdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTm90aGluZygpO1xuICAgIH0pXG4gICAgLmNoYWluKChbb3B0SWRlbnQsIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNJZGVudGlmaWVyKG9wdElkZW50KSkge1xuICAgICAgICByZXR1cm4gcG9wUmVzdE1heWJlKHJlc3QpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIE1heWJlLm9mKFtvcHRJZGVudCwgcmVzdF0pO1xuICAgIH0pXG4gICAgLmNoYWluKChbZm5Ld2QsIHJlc3RdKSA9PiB7XG4gICAgICBpZiAoaXNLZXl3b3JkKGZuS3dkLCAnZnVuY3Rpb24nKSkge1xuICAgICAgICByZXR1cm4gTWF5YmUub2YodHJ1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gTWF5YmUub2YoZmFsc2UpO1xuICAgIH0pXG4gICAgLmdldE9yRWxzZShmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1JlZ2V4UHJlZml4KGV4cHJBbGxvd2VkOiBib29sZWFuLCBwcmVmaXg6IExpc3Q8VG9rZW5UcmVlPikge1xuICBpZiAocHJlZml4LmlzRW1wdHkoKSkge1xuICAgIC8vIM61XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNUb3BQdW5jdHVhdG9yKHByZWZpeCkpIHtcbiAgICAvLyBQIC4gdCAgIHdoZXJlIHQg4oiIIFB1bmN0dWF0b3JcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc1RvcFN0YW5kYWxvbmVLZXl3b3JkKHByZWZpeCkpIHtcbiAgICAvLyBQIC4gdCAuIHQnICB3aGVyZSB0IFxcbm90ID0gXCIuXCIgYW5kIHQnIOKIiCAoS2V5d29yZCBcXHNldG1pbnVzICBMaXRlcmFsS2V5d29yZClcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc1RvcFBhcmVuc1dpdGhLZXl3b3JkKHByZWZpeCkpIHtcbiAgICAvLyBQIC4gdCAuIHQnIC4gKFQpICB3aGVyZSB0IFxcbm90ID0gXCIuXCIgYW5kIHQnIOKIiCAoS2V5d29yZCBcXHNldG1pbnVzIExpdGVyYWxLZXl3b3JkKVxuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzVG9wRnVuY3Rpb24ocHJlZml4KSkge1xuICAgIC8vIFAgLiBmdW5jdGlvbl5sIC4geD8gLiAoKSAuIHt9ICAgICB3aGVyZSBpc0V4cHJQcmVmaXgoUCwgYiwgbCkgPSBmYWxzZVxuICAgIHJldHVybiBpc1RvcEZ1bmN0aW9uRXhwcmVzc2lvbihwcmVmaXgsIGV4cHJBbGxvd2VkKTtcbiAgfSBlbHNlIGlmIChpc1RvcE9iamVjdExpdGVyYWwocHJlZml4LCBleHByQWxsb3dlZCkpIHtcbiAgICAvLyBQIC4ge1R9XmwgIHdoZXJlIGlzRXhwclByZWZpeChQLCBiLCBsKSA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIl19